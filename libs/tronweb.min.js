!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).TronWeb=t()}(this,(function(){"use strict";function e(e){return e&&e.__esModule?e:{default:e}}var t=require("bn.js"),n=e(t),r=require("buffer"),o=e(r),i=require("crypto-js"),s=e(i),a=require("elliptic"),c=e(a),u=require("hash.js"),l=e(u),d=require("js-sha3"),f=e(d),p=require("utf8"),m=e(p),h=require("uuid"),v=e(h),w=function(e){var t=new n.default(e,16);return t.toString(10)},x=function(e){return new n.default(e).toString(16)},y=function(e){return"0x"+x(e)},k=function(e){return e.replace(/^0x/i,"")},_=function(e){return new n.default(k(e),16)},A=function(e){return e.map((function(e){return e.toString(16).padStart(2,"0")})).join("")},S=function(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))},T=function(e){return e.reduce((function(e,t){return e*256+t}),0)},E=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},I=function(e){return e.split("").reverse().join("")},L=function(e){return e.map((function(e){return e.toString(16).padStart(2,"0")})).join("")},O=function(e){return new Promise((function(t,n){try{t(e)}catch(e){n(e)}}))},C=function(e,t,n){return new Promise((function(r,o){e.addEventListener(t,(function e(t){r(t),n&&t.target.removeEventListener(t.type,e)}),{once:!0}),setTimeout((function(){o(new Error("Timeout"))}),1e4)}))},N=function(e){return e.toString().replace(/^0x/i,"").length%2===0?e.toString().replace(/^0x/i,""):"0"+e.toString().replace(/^0x/i,"")},M=function(e){return"0x"+N(e)},P=function(e){return e.replace(/^0x/i,"")},B=function(e){return e.length%2===0?e:"0"+e},G=function(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))},H=function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")},V=function(e){return e.reduce((function(e,t){return e*256+t}),0)},W=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},X=function(e){return e.split("").reverse().join("")},Y=function(e){return e.map((function(e){return e.toString(16).padStart(2,"0")})).join("")},K=function(e){return new Promise((function(t,n){try{t(e)}catch(e){n(e)}}))},$=function(e,t,n){return new Promise((function(r,o){e.addEventListener(t,(function e(t){r(t),n&&t.target.removeEventListener(t.type,e)}),{once:!0}),setTimeout((function(){o(new Error(" Timeout"))}),1e4)}))},j=function(e){return e&&e.__esModule?e:{default:e}},Q=j(t),R=j(r),U=j(i),D=j(a),F=j(u),z=j(d),J=j(p),Z=j(h),tt=function(e){var t=new Q.default(e,16);return t.toString(10)},nt=function(e){return new Q.default(e).toString(16)},rt=function(e){return"0x"+nt(e)},ot=function(e){return e.replace(/^0x/i,"")},it=function(e){return new Q.default(ot(e),16)},st=function(e){return e.map((function(e){return e.toString(16).padStart(2,"0")})).join("")},at=function(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))},ct=function(e){return e.reduce((function(e,t){return e*256+t}),0)},ut=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},lt=function(e){return e.split("").reverse().join("")},dt=function(e){return e.map((function(e){return e.toString(16).padStart(2,"0")})).join("")},ft=function(e){return new Promise((function(t,n){try{t(e)}catch(e){n(e)}}))},pt=function(e,t,n){return new Promise((function(r,o){e.addEventListener(t,(function e(t){r(t),n&&t.target.removeEventListener(t.type,e)}),{once:!0}),setTimeout((function(){o(new Error(" Timeout"))}),1e4)}))},mt=function(e){return e.toString().replace(/^0x/i,"").length%2===0?e.toString().replace(/^0x/i,""):"0"+e.toString().replace(/^0x/i,"")},ht=function(e){return"0x"+mt(e)},vt=function(e){return e.replace(/^0x/i,"")},wt=function(e){return e.length%2===0?e:"0"+e},xt=function(e){return new Uint8Array(e.match(/.{1,2}/g).map((function(e){return parseInt(e,16)})))},yt=function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")},kt=function(e){return e.reduce((function(e,t){return e*256+t}),0)},_t=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e,0),n.set(t,e.length),n},At=function(e){return e.split("").reverse().join("")},St=function(e){return e.map((function(e){return e.toString(16).padStart(2,"0")})).join("")},Tt=function(e){return new Promise((function(t,n){try{t(e)}catch(e){n(e)}}))},Et=function(e,t,n){return new Promise((function(r,o){e.addEventListener(t,(function e(t){r(t),n&&t.target.removeEventListener(t.type,e)}),{once:!0}),setTimeout((function(){o(new Error(" Timeout"))}),1e4)}))},It={fromDecimal:function(e){return rt(new Q.default(e,10))},toDecimal:function(e){return tt(it(e))},fromAscii:function(e){var t="";for(var n=0;n<<e.length;n++)t+=e.charCodeAt(n).toString(16);return"0x"+t},toAscii:function(e){var t="",n=vt(e);for(var r=0;r<n.length;r+=2)t+=String.fromCharCode(parseInt(n.substr(r,2),16));return t},fromUtf8:function(e){try{return"0x"+encodeURIComponent(e).replace(/%/g,"")}catch(e){return this.fromAscii(e)}},toUtf8:function(e){try{return decodeURIComponent(vt(e).replace(/(..)/g,"%$1"))}catch(e){return this.toAscii(e)}},toHex:function(e){if(null==e)return"0x0";if("string"==typeof e)return e.startsWith("0x")?e:this.fromUtf8(e);if(Array.isArray(e)||e instanceof Uint8Array)return"0x"+st(e);if(e instanceof R.default.Buffer)return"0x"+e.toString("hex");if("number"==typeof e)return 0===e?"0x0":rt(new Q.default(e));if(e instanceof Q.default)return"0x"+e.toString(16);throw new Error("Unsupported type")},bytesToHex:function(e){return"0x"+st(e)},hexToBytes:function(e){return at(vt(e))},isHex:function(e){return/^0x[0-9a-fA-F]*$/.test(e)},padLeft:function(e,t,n){void 0===n&&(n="0");var r=vt(e);t=Math.ceil(r.length/2);var o=Math.ceil(t/1);return r=(n.repeat(o)+r).slice(-o*2),"0x"+r},padRight:function(e,t,n){void 0===n&&(n="0");var r=vt(e);t=Math.ceil(r.length/2);var o=Math.ceil(t/1);return r=(r+n.repeat(o)).slice(0,o*2),"0x"+r},toBigNumber:function(e){return e instanceof Q.default?e:"string"==typeof e&&e.startsWith("0x")?new Q.default(vt(e),16):new Q.default(e)},isAddress:function(e){try{return this.isHex(this.toHex(e))&&42===this.toHex(e).length}catch(e){return!1}},toTronAddress:function(e){if(!e)return"";var t=vt(this.toHex(e));return t.length<40&&(t=t.padStart(40,"0")),"41"+t.toUpperCase()},fromTronAddress:function(e){if(!e)return"";var t=vt(e);return t.startsWith("41")&&(t=t.slice(1)),"0x"+t.toLowerCase()},sha3:function(e){var t=z.default.keccak256.create();return t.update(e),"0x"+t.digest("hex")},sign:function(e,t){var n=new D.default.ec("secp256k1"),r=n.keyFromPrivate(vt(t), "hex"),o=r.sign(this.sha3(e).slice(2),{canonical:!0});return"0x"+o.r.toString(16,64)+o.s.toString(16,64)+(o.recoveryParam||0).toString(16,2)},verifySignature:function(e,t,n){var r=new D.default.ec("secp256k1"),o=r.keyFromPublic(n,"hex"),i=this.sha3(e).slice(2),s=vt(t);return o.verify(i,{r:s.slice(0,64),s:s.slice(64,128),recoveryParam:parseInt(s.slice(128,130),16)})},recover:function(e,t){var n=new D.default.ec("secp256k1"),r=vt(t),o={r:r.slice(0,64),s:r.slice(64,128),recoveryParam:parseInt(r.slice(128,130),16)},i=this.sha3(e).slice(2),s=n.recoverPubKey(i,o,r.recoveryParam);return"0x"+s.encode("hex",!0)},formatters:{inputAddress:function(e){return It.toTronAddress(e)},inputUint:function(e,t){var n=It.toBigNumber(e);if(n.lt(new Q.default(0)))throw new Error("uint cannot be negative");if(n.gt(new Q.default(2).pow(t).sub(new Q.default(1))))throw new Error("uint".concat(t," out of range"));return It.fromDecimal(n.toString())},inputInt:function(e,t){var n=It.toBigNumber(e),r=new Q.default(2).pow(t-1);if(n.lt(r.neg()))throw new Error("int".concat(t," out of range"));if(n.gt(r.sub(new Q.default(1))))throw new Error("int".concat(t," out of range"));return n.isNeg()?It.fromDecimal(n.add(new Q.default(2).pow(t)).toString()):It.fromDecimal(n.toString())},inputBool:function(e){return!!e},inputBytes:function(e){return It.toHex(e)},inputString:function(e){return It.toHex(e)},outputAddress:function(e){return It.fromTronAddress(e)},outputUint:function(e){return It.toDecimal(e)},outputInt:function(e,t){var n=It.toDecimal(e),r=new Q.default(2).pow(t-1).toNumber();return n>=r?n-2*r:n},outputBool:function(e){return"0x1"===e||"1"===e},outputBytes:function(e){return It.hexToBytes(e)},outputString:function(e){return It.toUtf8(e)}}},Lt=function(e){var t=e||{};this.utils=It,this.providers={},this.setProvider(t.fullHost||"https://api.trongrid.io"),this.defaultBlock="latest",this.transactionPollingTimeout=1e4,this.transactionPollingInterval=500,this.events={},this.ready=!1,this.on("ready",(function(){this.ready=!0}).bind(this))};Lt.prototype.setProvider=function(e){if("string"==typeof e){var t=e.includes("http")?e:"https://"+e;this.provider={send:function(e,n){return new Promise((function(r,o){fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then((function(e){return e.json()})).then((function(e){n(null,e)})).catch((function(e){n(e)}))}))}};return this}if("object"==typeof e&&e.send){this.provider=e;return this}throw new Error("Invalid provider")},Lt.prototype.on=function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},Lt.prototype.off=function(e,t){if(!this.events[e])return;var n=this.events[e].indexOf(t);-1!==n&&this.events[e].splice(n,1)},Lt.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1);if(!this.events[e])return;this.events[e].forEach((function(e){e.apply(null,t)}))},Lt.prototype.request=function(e){return new Promise((function(t,n){this.provider.send(JSON.stringify(e),(function(e,r){e?n(e):t(r)}))}.bind(this)))},Lt.prototype.getBlock=function(e,t){return new Promise((function(n,r){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_getBlockByNumber",params:[e,t]}),(function(e,t,o){if(e)return void r(e);if(o)return void r(new Error(o.message));if(!t.result&&!t.error)return void r(new Error("No result or error"));if(t.error)return void r(new Error(t.error.message||JSON.stringify(t.error)));n(t.result)})).bind(this)}))},Lt.prototype.getBlockNumber=function(){return new Promise((function(e,t){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]}),(function(n,r,o){if(n)return void t(n);if(o)return void t(new Error(o.message));if(!r.result&&!r.error)return void t(new Error("No result or error"));if(r.error)return void t(new Error(r.error.message||JSON.stringify(r.error)));e(parseInt(r.result,16))})).bind(this)}))},Lt.prototype.getTransaction=function(e){return new Promise((function(t,n){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_getTransactionByHash",params:[e]}),(function(e,r,o){if(e)return void n(e);if(o)return void n(new Error(o.message));if(!r.result&&!r.error)return void n(new Error("No result or error"));if(r.error)return void n(new Error(r.error.message||JSON.stringify(r.error)));t(r.result)})).bind(this)}))},Lt.prototype.getTransactionReceipt=function(e){return new Promise((function(t,n){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_getTransactionReceipt",params:[e]}),(function(e,r,o){if(e)return void n(e);if(o)return void n(new Error(o.message));if(!r.result&&!r.error)return void n(new Error("No result or error"));if(r.error)return void n(new Error(r.error.message||JSON.stringify(r.error)));t(r.result)})).bind(this)}))},Lt.prototype.getTransactionCount=function(e,t){return new Promise((function(n,r){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_getTransactionCount",params:[e,t||this.defaultBlock]}),(function(e,t,o){if(e)return void r(e);if(o)return void r(new Error(o.message));if(!t.result&&!t.error)return void r(new Error("No result or error"));if(t.error)return void r(new Error(t.error.message||JSON.stringify(t.error)));n(parseInt(t.result,16))})).bind(this)}))},Lt.prototype.getBalance=function(e,t){return new Promise((function(n,r){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_getBalance",params:[e,t||this.defaultBlock]}),(function(e,t,o){if(e)return void r(e);if(o)return void r(new Error(o.message));if(!t.result&&!t.error)return void r(new Error("No result or error"));if(t.error)return void r(new Error(t.error.message||JSON.stringify(t.error)));n(new Q.default(t.result,16))})).bind(this)}))},Lt.prototype.call=function(e,t){return new Promise((function(n,r){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_call",params:[{to:e.to,from:e.from||this.defaultAddress.base58,gas:e.gas||"0x1e240",gasPrice:e.gasPrice||"0x0",value:e.value||"0x0",data:e.data},t||this.defaultBlock]}),(function(e,t,o){if(e)return void r(e);if(o)return void r(new Error(o.message));if(!t.result&&!t.error)return void r(new Error("No result or error"));if(t.error)return void r(new Error(t.error.message||JSON.stringify(t.error)));n(t.result)})).bind(this)}))},Lt.prototype.sendTransaction=function(e){return new Promise((function(t,n){if(!this.defaultAddress.base58)return void n(new Error("No default address set"));var r={to:e.to?this.utils.toTronAddress(e.to):"",from:this.defaultAddress.base58,gas:e.gas||"0x1e240",gasPrice:e.gasPrice||"0x0",value:e.value?this.utils.fromDecimal(e.value.toString()):"0x0",data:e.data||"0x0",nonce:e.nonce};this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_sendTransaction",params:[r]}),(function(e,r,o){if(e)return void n(e);if(o)return void n(new Error(o.message));if(!r.result&&!r.error)return void n(new Error("No result or error"));if(r.error)return void n(new Error(r.error.message||JSON.stringify(r.error)));t(r.result)})).bind(this)}))},Lt.prototype.signTransaction=function(e){return new Promise((function(t,n){if(!this.defaultAddress.base58)return void n(new Error("No default address set"));var r={to:e.to?this.utils.toTronAddress(e.to):"",from:this.defaultAddress.base58,gas:e.gas||"0x1e240",gasPrice:e.gasPrice||"0x0",value:e.value?this.utils.fromDecimal(e.value.toString()):"0x0",data:e.data||"0x0",nonce:e.nonce};this.provider.signTransaction?this.provider.signTransaction(r).then((function(e){t(e)})).catch((function(e){n(e)})):n(new Error("Provider does not support signTransaction"))}.bind(this))),Lt.prototype.sign=function(e,t){return new Promise((function(n,r){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"personal_sign",params:[t,e]}),(function(e,t,o){if(e)return void r(e);if(o)return void r(new Error(o.message));if(!t.result&&!t.error)return void r(new Error("No result or error"));if(t.error)return void r(new Error(t.error.message||JSON.stringify(t.error)));n(t.result)})).bind(this)}))},Lt.prototype.signTypedData=function(e,t,n){return new Promise((function(r,o){var i=t.map((function(e){return{name:e,type:n[e]}}));this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_signTypedData_v4",params:[n,i]}),(function(e,t,n){if(e)return void o(e);if(n)return void o(new Error(n.message));if(!t.result&&!t.error)return void o(new Error("No result or error"));if(t.error)return void o(new Error(t.error.message||JSON.stringify(t.error)));r(t.result)})).bind(this)}))},Lt.prototype.getAccounts=function(){return new Promise((function(t,n){this.provider.send(JSON.stringify({jsonrpc:"2.0",id:1,method:"eth_accounts",params:[]}),(function(e,r,o){if(e)return void n(e);if(o)return void n(new Error(o.message));if(!r.result&&!r.error)return void n(new Error("No result or error"));if(r.error)return void n(new Error(r.error.message||JSON.stringify(r.error)));t(r.result[0]||null)})).bind(this)}))},Lt.prototype.setDefaultAccount=function(e){this.defaultAddress={base58:this.utils.toTronAddress(e),hex:this.utils.fromTronAddress(e)}},Lt.prototype.contract=function(e,t){return new Promise((function(n,r){try{var o=new Ot(this,e,t);n(o)}catch(e){r(e)}}))},Lt.prototype.waitForTransaction=function(e){return new Promise((function(t,n){var r=Date.now(),o=setInterval((function(){this.getTransactionReceipt(e).then((function(e){if(e)return clearInterval(o),void t(e);if(Date.now()-r>this.transactionPollingTimeout)return clearInterval(o),void n(new Error("Transaction timeout"))})).catch((function(e){clearInterval(o),n(e)}))}.bind(this),this.transactionPollingInterval)}))};var Ot=function(e,t,n){this.tronWeb=e,this.address=n?this.tronWeb.utils.toTronAddress(n):null,this.abi=t,this.methods={},this.events={},this._decodeABI(),this._encodeABI()};Ot.prototype._decodeABI=function(){var e=this;this.abi.forEach((function(t){if("function"===t.type){var n={name:t.name,inputs:t.inputs,outputs:t.outputs,constant:"constant"in t?t.constant:"view"===t.stateMutability,payable:t.payable||!1,type:t.type,stateMutability:t.stateMutability,signature:e._getFunctionSignature(t)};e.methods[t.name]=function(){var r=Array.prototype.slice.call(arguments);return new Ct(e.tronWeb,e.address,n,r)}}else if("event"===t.type){var n={name:t.name,inputs:t.inputs,anonymous:t.anonymous,signature:e._getEventSignature(t)};e.events[t.name]=n}}))},Ot.prototype._encodeABI=function(){},Ot.prototype._getFunctionSignature=function(e){return e.name+"("+e.inputs.map((function(e){return e.type})).join(",")+")"},Ot.prototype._getEventSignature=function(e){return e.name+"("+e.inputs.map((function(e){return e.type})).join(",")+")"},Ot.prototype._getFunctionSelector=function(e){return this.tronWeb.utils.sha3(this._getFunctionSignature(e)).slice(0,8)},Ot.prototype.at=function(e){this.address=this.tronWeb.utils.toTronAddress(e);return this},Ot.prototype.deploy=function(e){if(!this.abi.some((function(e){return"constructor"===e.type})))throw new Error("No constructor found");var t=this.abi.find((function(e){return"constructor"===e.type}));return new Ct(this.tronWeb,null,{name:"constructor",inputs:t.inputs,outputs:[],constant:!1,payable:t.payable||!1,type:"constructor",stateMutability:t.stateMutability},e)};var Ct=function(e,t,n,r){this.tronWeb=e,this.contractAddress=t,this.method=n,this.args=r,this._gas="0x1e240",this._gasPrice="0x0",this._value="0x0",this._from=null};Ct.prototype.gas=function(e){this._gas=this.tronWeb.utils.fromDecimal(e.toString());return this},Ct.prototype.gasPrice=function(e){this._gasPrice=this.tronWeb.utils.fromDecimal(e.toString());return this},Ct.prototype.value=function(e){if(!this.method.payable)throw new Error("Cannot send value to non-payable method");this._value=this.tronWeb.utils.fromDecimal(e.toString());return this},Ct.prototype.from=function(e){this._from=this.tronWeb.utils.toTronAddress(e);return this},Ct.prototype.encodeABI=function(){if("constructor"===this.method.name){var e=this._encodeConstructorParams();return e}else{var e=this.tronWeb.utils.sha3(this.method.signature).slice(0,8),t=this._encodeParams(this.method.inputs,this.args);return"0x"+e+t}},Ct.prototype._encodeConstructorParams=function(){return this._encodeParams(this.method.inputs,this.args)},Ct.prototype._encodeParams=function(e,t){var n="",r=this._validateParams(e,t);return e.forEach((function(e,o){n+=Ct._encodeParam(e.type,r[o])})),n},Ct._encodeParam=function(e,t){switch(e){case"address":return Ct._encodeAddress(t);case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"uint256":return Ct._encodeUint(t);case"int8":case"int16":case"int32":case"int64":case"int128":case"int256":return Ct._encodeInt(t,e);case"bool":return Ct._encodeBool(t);case"bytes":case"bytes1":case"bytes2":case"bytes32":return Ct._encodeBytes(t,e);case"string":return Ct._encodeString(t);default:if(e.startsWith("uint"))return Ct._encodeUint(t);if(e.startsWith("int"))return Ct._encodeInt(t,e);if(e.startsWith("bytes"))return Ct._encodeBytes(t,e);if(e.startsWith("["))return Ct._encodeArray(t,e);throw new Error("Unsupported type: ".concat(e))}},Ct._encodeAddress=function(e){return e.padStart(64,"0")},Ct._encodeUint=function(e){return e.toString(16).padStart(64,"0")},Ct._encodeInt=function(e,t){var n=parseInt(t.replace("int","")),r=new Q.default(2).pow(n);var o=e;o.isNeg()&&(o=o.add(r));return o.toString(16).padStart(64,"0")},Ct._encodeBool=function(e){return e?"0000000000000000000000000000000000000000000000000000000000000001":"0000000000000000000000000000000000000000000000000000000000000000"},Ct._encodeBytes=function(e,t){var n=vt(e);var r=parseInt(t.replace("bytes","")||n.length/2);if(n.length%2!==0)throw new Error("Bytes must be even length");if(r&&n.length>2*r)throw new Error("Bytes length exceeds ".concat(r));return n.padEnd(64,"0")},Ct._encodeString=function(e){var t=encodeURIComponent(e).replace(/%/g,"");return t.padEnd(64,"0")},Ct._encodeArray=function(e,t){var n="",r=t.match(/^(\w+)\[(\d*)\]$/);if(!r)throw new Error("Invalid array type: ".concat(t));var o=r[1],i=r[2]?parseInt(r[2]):e.length;if(e.length!==i)throw new Error("Array length does not match type: ".concat(e.length," != ").concat(i));e.forEach((function(e){n+=Ct._encodeParam(o,e)})),return n},Ct.prototype._validateParams=function(e,t){if(e.length!==t.length)throw new Error("Invalid number of parameters: expected ".concat(e.length,", got ").concat(t.length));var n=[];return e.forEach((function(e,o){var i=t[o];switch(e.type){case"address":if(!this.tronWeb.utils.isAddress(i))throw new Error("Invalid address: ".concat(i));n.push(this.tronWeb.utils.fromTronAddress(i).slice(2));break;case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"uint256":case"int8":case"int16":case"int32":case"int64":case"int128":case"int256":n.push(this.tronWeb.utils.toBigNumber(i));break;case"bool":n.push(!!i);break;case"bytes":case"bytes1":case"bytes2":case"bytes32":n.push(this.tronWeb.utils.toHex(i).slice(2));break;case"string":n.push(i);break;default:if(e.type.startsWith("uint")||e.type.startsWith("int"))n.push(this.tronWeb.utils.toBigNumber(i));else if(e.type.startsWith("bytes"))n.push(this.tronWeb.utils.toHex(i).slice(2));else if(e.type.startsWith("[")){var r=e.type.match(/^(\w+)\[(\d*)\]$/);if(!r)throw new Error("Invalid array type: ".concat(e.type));var o=r[1];if(!Array.isArray(i))throw new Error("Expected array for type: ".concat(e.type));var s=this._validateParams(i.map((function(){return{type:o}})),i);n.push(s);break;}else throw new Error("Unsupported parameter type: ".concat(e.type))}}.bind(this))),n},Ct.prototype.send=function(e){var t={to:this.contractAddress,from:this._from||this.tronWeb.defaultAddress.base58,gas:this._gas,gasPrice:this._gasPrice,value:this._value,data:this.encodeABI()};return this.tronWeb.sendTransaction(t).then((function(e){return this._handleTransactionResponse(e)}).bind(this))},Ct.prototype._handleTransactionResponse=function(e){return new Promise((function(t,n){this.tronWeb.waitForTransaction(e).then((function(e){t(this._decodeOutput(e.logs))})).catch((function(e){n(e)}))}.bind(this)))},Ct.prototype._decodeOutput=function(e){if(!this.method.outputs||0===this.method.outputs.length)return{};var t={};if(1===this.method.outputs.length)return this._decodeParam(this.method.outputs[0],e);this.method.outputs.forEach((function(e,n){t[e.name||"return".concat(n)]=this._decodeParam(e,e.logs[n])}.bind(this)));return t},Ct.prototype._decodeParam=function(e,t){switch(e.type){case"address":return this.tronWeb.utils.toTronAddress("0x"+t);case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"uint256":return this.tronWeb.utils.toDecimal(t);case"int8":case"int16":case"int32":case"int64":case"int128":case"int256":var n=parseInt(e.type.replace("int",""));return this.tronWeb.utils.formatters.outputInt(t,n);case"bool":return"0x1"===t||"1"===t;case"bytes":case"bytes1":case"bytes2":case"bytes32":return this.tronWeb.utils.hexToBytes(t);case"string":return this.tronWeb.utils.toUtf8(t);default:if(e.type.startsWith("uint"))return this.tronWeb.utils.toDecimal(t);if(e.type.startsWith("int")){var n=parseInt(e.type.replace("int",""));return this.tronWeb.utils.formatters.outputInt(t,n);}if(e.type.startsWith("bytes"))return this.tronWeb.utils.hexToBytes(t);if(e.type.startsWith("[")){var r=e.type.match(/^(\w+)\[(\d*)\]$/);if(!r)throw new Error("Invalid array type: ".concat(e.type));var o=r[1];return t.map((function(t){return this._decodeParam({type:o},t)}).bind(this));}throw new Error("Unsupported output type: ".concat(e.type))}},Ct.prototype.call=function(e){var t={to:this.contractAddress,from:this._from||this.tronWeb.defaultAddress.base58,gas:this._gas,gasPrice:this._gasPrice,value:this._value,data:this.encodeABI()};return this.tronWeb.call(t,e).then((function(e){return this._decodeCallOutput(e)}).bind(this))},Ct.prototype._decodeCallOutput=function(e){if(!this.method.outputs||0===this.method.outputs.length)return{};var t={};if(1===this.method.outputs.length)return this._decodeParam(this.method.outputs[0],e);var n=0;return this.method.outputs.forEach((function(r,o){var i=this._decodeParamFromData(r,e,n);t[r.name||"return".concat(o)]=i.value,n=i.offset}.bind(this))),t},Ct.prototype._decodeParamFromData=function(e,t,n){var r={};switch(e.type){case"address":r.value=this.tronWeb.utils.toTronAddress("0x"+t.substr(n+2,40)),r.offset=n+64;break;case"uint8":case"uint16":case"uint32":case"uint64":case"uint128":case"uint256":case"int8":case"int16":case"int32":case"int64":case"int128":case"int256":r.value="uint"===e.type.slice(0,4)?this.tronWeb.utils.toDecimal("0x"+t.substr(n,64)):this.tronWeb.utils.formatters.outputInt("0x"+t.substr(n,64),parseInt(e.type.replace("int",""))),r.offset=n+64;break;case"bool":r.value="0000000000000000000000000000000000000000000000000000000000000001"===t.substr(n,64),r.offset=n+64;break;case"bytes":case"bytes1":case"bytes2":case"bytes32":var o=parseInt(e.type.replace("bytes","")||32);r.value=this.tronWeb.utils.hexToBytes("0x"+t.substr(n,2*o)),r.offset=n+64;break;case"string":var i=this.tronWeb.utils.toDecimal("0x"+t.substr(n,64));r.value=this.tronWeb.utils.toUtf8("0x"+t.substr(n+64,2*i)),r.offset=n+64+2*i;break;default:if(e.type.startsWith("uint")||e.type.startsWith("int"))r.value="uint"===e.type.slice(0,4)?this.tronWeb.utils.toDecimal("0x"+t.substr(n,64)):this.tronWeb.utils.formatters.outputInt("0x"+t.substr(n,64),parseInt(e.type.replace("int",""))),r.offset=n+64;else if(e.type.startsWith("bytes")){var o=parseInt(e.type.replace("bytes","")||32);r.value=this.tronWeb.utils.hexToBytes("0x"+t.substr(n,2*o)),r.offset=n+64;}else if(e.type.startsWith("[")){var s=e.type.match(/^(\w+)\[(\d*)\]$/);if(!s)throw new Error("Invalid array type: ".concat(e.type));var a=s[1],c=s[2]?parseInt(s[2]):void 0;var u=[],l=c?c:this.tronWeb.utils.toDecimal("0x"+t.substr(n,64)),d=n+64;for(var f=0;f<l;f++){var p=this._decodeParamFromData({type:a},t,d);u.push(p.value),d=p.offset}r.value=u,r.offset=d;break;}else throw new Error("Unsupported output type: ".concat(e.type))}return r};return Lt}));